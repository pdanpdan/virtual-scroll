import{B as e,C as t,E as n,F as r,H as i,I as a,L as o,M as s,N as c,O as l,P as u,R as d,T as f,U as p,V as m,W as h,_ as g,b as _,c as v,f as y,g as b,h as x,i as S,j as C,k as w,r as T,v as E,y as D,z as ee}from"./chunk-CeuQGv84.js";import{n as O,t as k}from"./chunk-CNwi8UUp.js";var A=class{tree;values;constructor(e){this.tree=new Float64Array(e+1),this.values=new Float64Array(e)}update(e,t){if(!(e<0||e>=this.values.length))for(this.values[e]=this.values[e]+t,e++;e<this.tree.length;)this.tree[e]=this.tree[e]+t,e+=e&-e}query(e){let t=0;for(;e>0;)t+=this.tree[e]||0,e-=e&-e;return t}set(e,t){e<0||e>=this.values.length||(this.values[e]=t)}get length(){return this.values.length}get(e){return this.values[e]||0}getValues(){return this.values}findLowerBound(e){let t=0,n=this.tree.length,r=1<<Math.floor(Math.log2(n-1));for(;r>0;){let i=t+r;if(i<n){let n=this.tree[i]||0;n<=e&&(t=i,e-=n)}r>>=1}return t}rebuild(){this.tree.fill(0);for(let e=0;e<this.values.length;e++)this.tree[e+1]=this.values[e]||0;for(let e=1;e<this.tree.length;e++){let t=e+(e&-e);t<this.tree.length&&(this.tree[t]=this.tree[t]+this.tree[e])}}resize(e){if(e===this.values.length)return;let t=new Float64Array(e);t.set(this.values.subarray(0,Math.min(e,this.values.length))),this.values=t,this.tree=new Float64Array(e+1),this.rebuild()}shift(e){if(e===0)return;let t=this.values.length,n=new Float64Array(t);e>0?n.set(this.values.subarray(0,Math.min(t-e,this.values.length)),e):n.set(this.values.subarray(-e)),this.values=n,this.rebuild()}};function te(e){return!!e&&`getBoundingClientRect`in e}function j(e){return!!e&&`scrollLeft`in e}function ne(e){return typeof e==`object`&&!!e&&(`align`in e||`behavior`in e||`isCorrection`in e)}function M(e,t){return typeof e==`object`&&e?e.x||0:t===`horizontal`&&e||0}function N(e,t){return typeof e==`object`&&e?e.y||0:(t===`vertical`||t===`both`)&&e||0}function P(t){let r=e(0),i=e(0),o=e(!1),s=e(!1),c=e(!1),u=e(!1),d=e(0),f=e(0),p=ee({x:0,y:0}),m,h=e(!1),g=new A(t.value.items.length),_=new A(t.value.items.length),v=new A(t.value.columnCount||0),y=e(0),x=new Uint8Array,S=new Uint8Array,T=new Uint8Array,E=e(null),D=e(!1),O=[],k=b(()=>t.value.itemSize===void 0||t.value.itemSize===null||t.value.itemSize===0),P=b(()=>t.value.columnWidth===void 0||t.value.columnWidth===null||t.value.columnWidth===0),F=b(()=>typeof t.value.itemSize==`number`&&t.value.itemSize>0?t.value.itemSize:null),I=b(()=>F.value||t.value.defaultItemSize||50),L=b(()=>[...t.value.stickyIndices||[]].sort((e,t)=>e-t)),R=b(()=>{if(y.value,!s.value&&t.value.ssrRange&&!u.value){let{start:e=0,end:n=0,colStart:r=0,colEnd:i=0}=t.value.ssrRange,a=t.value.columnCount||0;if(t.value.direction===`both`&&a>0)return v.query(i||a)-v.query(r);if(t.value.direction===`horizontal`)return F.value===null?g.query(n)-g.query(e):(n-e)*(F.value+(t.value.columnGap||0))}return t.value.direction===`both`&&t.value.columnCount?v.query(t.value.columnCount):t.value.direction===`vertical`?0:F.value===null?g.query(t.value.items.length):t.value.items.length*(F.value+(t.value.columnGap||0))}),z=b(()=>{if(y.value,!s.value&&t.value.ssrRange&&!u.value){let{start:e,end:n}=t.value.ssrRange;if(t.value.direction===`vertical`||t.value.direction===`both`)return F.value===null?_.query(n)-_.query(e):(n-e)*(F.value+(t.value.gap||0))}return t.value.direction===`horizontal`?0:F.value===null?_.query(t.value.items.length):t.value.items.length*(F.value+(t.value.gap||0))}),B=b(()=>{let e=t.value.direction===`horizontal`||t.value.direction===`both`?M(t.value.scrollPaddingStart,t.value.direction):0;return Math.max(0,r.value+e-p.x)}),V=b(()=>{let e=t.value.direction===`vertical`||t.value.direction===`both`?N(t.value.scrollPaddingStart,t.value.direction):0;return Math.max(0,i.value+e-p.y)}),H=e=>{y.value;let n=t.value.columnWidth;return typeof n==`number`&&n>0?n:Array.isArray(n)&&n.length>0?n[e%n.length]||150:typeof n==`function`?n(e):v.get(e)||t.value.defaultColumnWidth||150},U=(e,n,a)=>{let s=typeof a==`object`&&a&&`isCorrection`in a?a.isCorrection:!1;s||(E.value={rowIndex:e,colIndex:n,options:a});let c=t.value.container||window,l=F.value,u=t.value.gap||0,m=t.value.columnGap||0,y,b;ne(a)?(y=a.align,b=a.behavior):y=a;let x=(typeof y==`object`?y.x:y)||`auto`,S=(typeof y==`object`?y.y:y)||`auto`,C=M(t.value.scrollPaddingStart,t.value.direction),w=M(t.value.scrollPaddingEnd,t.value.direction),T=N(t.value.scrollPaddingStart,t.value.direction),D=N(t.value.scrollPaddingEnd,t.value.direction),ee=t.value.direction===`vertical`||t.value.direction===`both`,O=t.value.direction===`horizontal`||t.value.direction===`both`,k=d.value-(O?C+w:0),A=f.value-(ee?T+D:0),P=B.value,I=V.value,L=0,H=0;if(e!=null&&(e>=t.value.items.length?(I=z.value,H=0):(I=l===null?_.query(e):e*(l+u),H=l===null?_.get(e)-u:l),S===`start`||(S===`center`?I-=(A-H)/2:S===`end`?I-=A-H:I>=V.value&&I+H<=V.value+A||I<V.value||(I-=A-H))),n!=null){let e=t.value.columnCount||0;n>=e&&e>0?(P=R.value,L=0):t.value.direction===`horizontal`?(P=l===null?g.query(n):n*(l+m),L=l===null?g.get(n)-m:l):(P=v.query(n),L=v.get(n)),x===`start`||(x===`center`?P-=(k-L)/2:x===`end`?P-=k-L:P>=B.value&&P+L<=B.value+k||P<B.value||(P-=k-L))}P=Math.max(0,Math.min(P,Math.max(0,R.value-k))),I=Math.max(0,Math.min(I,Math.max(0,z.value-A)));let U=P+p.x-(O?C:0),W=I+p.y-(ee?T:0),G=n==null||Math.abs(B.value-P)<1,K=e==null||Math.abs(V.value-I)<1;if(!G||!K){let t=0,r=0,i=0,a=0,o=0,s=0;if(typeof window<`u`){if(c===window?(t=window.scrollX,r=window.scrollY,i=document.documentElement.scrollWidth,a=document.documentElement.scrollHeight,o=window.innerWidth,s=window.innerHeight):te(c)&&(t=c.scrollLeft,r=c.scrollTop,i=c.scrollWidth,a=c.scrollHeight,o=c.clientWidth,s=c.clientHeight),!G&&n!=null){let e=t<=1&&U<=1,n=t>=i-o-1&&U>=i-o-1;(e||n)&&(G=!0)}if(!K&&e!=null){let e=r<=1&&W<=1,t=r>=a-s-1&&W>=a-s-1;(e||t)&&(K=!0)}}}let q=s?`auto`:b||`smooth`;if(h.value=!0,typeof window<`u`&&c===window)window.scrollTo({left:n==null?void 0:Math.max(0,U),top:e==null?void 0:Math.max(0,W),behavior:q});else if(j(c)){let t={behavior:q};n!=null&&(t.left=Math.max(0,U)),e!=null&&(t.top=Math.max(0,W)),typeof c.scrollTo==`function`?c.scrollTo(t):(t.left!==void 0&&(c.scrollLeft=t.left),t.top!==void 0&&(c.scrollTop=t.top))}(q===`auto`||q===void 0)&&(n!=null&&(r.value=Math.max(0,U)),e!=null&&(i.value=Math.max(0,W))),G&&K&&!o.value&&(E.value=null)},W=(e,n,a)=>{let o=t.value.container||window;h.value=!0;let s=t.value.direction===`vertical`||t.value.direction===`both`,c=t.value.direction===`horizontal`||t.value.direction===`both`,l=M(t.value.scrollPaddingStart,t.value.direction),u=N(t.value.scrollPaddingStart,t.value.direction),m=M(t.value.scrollPaddingEnd,t.value.direction),g=N(t.value.scrollPaddingEnd,t.value.direction),_=d.value-(c?l+m:0),v=f.value-(s?u+g:0),y=e==null?null:c?Math.max(0,Math.min(e,Math.max(0,R.value-_))):Math.max(0,e),b=n==null?null:s?Math.max(0,Math.min(n,Math.max(0,z.value-v))):Math.max(0,n),x=typeof window<`u`&&o===window?window.scrollX:o.scrollLeft,S=typeof window<`u`&&o===window?window.scrollY:o.scrollTop,C=y===null?x:y+p.x-(c?l:0),w=b===null?S:b+p.y-(s?u:0);if(typeof window<`u`&&o===window)window.scrollTo({left:e==null?void 0:C,top:n==null?void 0:w,behavior:a?.behavior||`auto`});else if(j(o)){let t={behavior:a?.behavior||`auto`};e!=null&&(t.left=C),n!=null&&(t.top=w),typeof o.scrollTo==`function`?o.scrollTo(t):(t.left!==void 0&&(o.scrollLeft=t.left),t.top!==void 0&&(o.scrollTop=t.top))}(a?.behavior===`auto`||a?.behavior===void 0)&&(e!=null&&(r.value=C),n!=null&&(i.value=w))},G=()=>{let e=t.value.items,n=e.length,r=t.value.columnCount||0;if(g.resize(n),_.resize(n),v.resize(r),S.length!==n){let e=new Uint8Array(n);e.set(S.subarray(0,Math.min(n,S.length))),S=e}if(T.length!==n){let e=new Uint8Array(n);e.set(T.subarray(0,Math.min(n,T.length))),T=e}if(x.length!==r){let e=new Uint8Array(r);e.set(x.subarray(0,Math.min(r,x.length))),x=e}let i=0;if(t.value.restoreScrollOnPrepend&&O.length>0&&n>O.length){let t=O[0];if(t!==void 0){for(let r=1;r<=n-O.length;r++)if(e[r]===t){i=r;break}}}if(i>0){g.shift(i),_.shift(i),E.value&&E.value.rowIndex!==null&&E.value.rowIndex!==void 0&&(E.value.rowIndex+=i);let r=new Uint8Array(n),a=new Uint8Array(n);r.set(S.subarray(0,Math.min(n-i,S.length)),i),a.set(T.subarray(0,Math.min(n-i,T.length)),i),S=r,T=a;let o=t.value.gap||0,s=t.value.columnGap||0,c=0,u=0;for(let n=0;n<i;n++){let r=typeof t.value.itemSize==`function`?t.value.itemSize(e[n],n):I.value;t.value.direction===`horizontal`?c+=r+s:u+=r+o}(c>0||u>0)&&l(()=>{W(c>0?B.value+c:null,u>0?V.value+u:null,{behavior:`auto`})})}if(r>0){let e=t.value.columnGap||0,n=!1;for(let t=0;t<r;t++){let r=H(t),i=v.get(t);if(!P.value||i===0){let a=r+e;Math.abs(i-a)>.5&&(v.set(t,a),n=!0)}}n&&v.rebuild()}let a=t.value.gap||0,o=t.value.columnGap||0,s=!1;for(let e=0;e<n;e++){let n=t.value.items[e],r=g.get(e),i=_.get(e);if(k.value&&(r>0||i>0))continue;let c=typeof t.value.itemSize==`function`?t.value.itemSize(n,e):I.value,l=t.value.direction===`vertical`,u=t.value.direction===`horizontal`,d=t.value.direction===`both`,f=u?c+o:0,p=l||d?c+a:0;Math.abs(r-f)>.5&&(g.set(e,f),s=!0),Math.abs(i-p)>.5&&(_.set(e,p),s=!0)}s&&(g.rebuild(),_.rebuild()),O=[...e],D.value=!0,y.value++},K=()=>{if(t.value.hostElement&&typeof window<`u`){let e=t.value.hostElement.getBoundingClientRect(),n=t.value.container||window,r=0,i=0;if(n===window)r=e.left+window.scrollX,i=e.top+window.scrollY;else if(n===t.value.hostElement)r=0,i=0;else if(te(n)){let t=n.getBoundingClientRect();r=e.left-t.left+n.scrollLeft,i=e.top-t.top+n.scrollTop}(Math.abs(p.x-r)>.1||Math.abs(p.y-i)>.1)&&(p.x=r,p.y=i)}};a([()=>t.value.items.length,()=>t.value.columnCount,()=>t.value.columnWidth,()=>t.value.itemSize,()=>t.value.gap,()=>t.value.columnGap],G,{immediate:!0}),a(()=>[t.value.container,t.value.hostElement],()=>{K()});let q=b(()=>{if(y.value,(!s.value||c.value)&&t.value.ssrRange)return{start:t.value.ssrRange.start,end:t.value.ssrRange.end};let e=t.value.direction||`vertical`,n=t.value.ssrRange&&!o.value?0:t.value.bufferBefore??5,r=t.value.bufferAfter??5,i=t.value.gap||0,a=t.value.columnGap||0,l=F.value,u=M(t.value.scrollPaddingStart,e),p=M(t.value.scrollPaddingEnd,e),m=N(t.value.scrollPaddingStart,e),h=N(t.value.scrollPaddingEnd,e),v=e===`vertical`||e===`both`,b=e===`horizontal`||e===`both`,x=d.value-(b?u+p:0),S=f.value-(v?m+h:0),C=0,w=t.value.items.length;if(v)if(l!==null)C=Math.floor(V.value/(l+i)),w=Math.ceil((V.value+S)/(l+i));else{C=_.findLowerBound(V.value);let e=_.query(C),n=C;for(;n<t.value.items.length&&e<V.value+S;)e=_.query(++n);w=n}else if(l!==null)C=Math.floor(B.value/(l+a)),w=Math.ceil((B.value+x)/(l+a));else{C=g.findLowerBound(B.value);let e=g.query(C),n=C;for(;n<t.value.items.length&&e<B.value+x;)e=g.query(++n);w=n}return{start:Math.max(0,C-n),end:Math.min(t.value.items.length,w+r)}}),J=b(()=>{y.value;let e=F.value,n=t.value.gap||0,r=t.value.columnGap||0;return t.value.direction===`horizontal`?e===null?g.findLowerBound(B.value):Math.floor(B.value/(e+r)):e===null?_.findLowerBound(V.value):Math.floor(V.value/(e+n))}),Y=b(()=>{y.value;let{start:e,end:n}=q.value,r=[],i=F.value,a=t.value.gap||0,o=t.value.columnGap||0,c=L.value,l=new Set;for(let t=e;t<n;t++)l.add(t);if(s.value||!t.value.ssrRange){let t=J.value,r,i=0,a=c.length-1;for(;i<=a;){let e=i+a>>>1;c[e]<t?(r=c[e],i=e+1):a=e-1}r!==void 0&&l.add(r);for(let t of c)t>=e&&t<n&&l.add(t)}let u=Array.from(l).sort((e,t)=>e-t),p=t.value.ssrRange?.start||0,m=t.value.ssrRange?.colStart||0,h=0,b=0;!s.value&&t.value.ssrRange&&(b=t.value.direction===`vertical`||t.value.direction===`both`?i===null?_.query(p):p*(i+a):0,t.value.direction===`horizontal`?h=i===null?g.query(m):m*(i+o):t.value.direction===`both`&&(h=v.query(m)));for(let e of u){let n=t.value.items[e];if(n===void 0)continue;let s=0,l=0,u=0,p=0;t.value.direction===`horizontal`?(s=i===null?g.query(e):e*(i+o),u=i===null?g.get(e)-o:i,p=f.value):(l=(t.value.direction===`vertical`||t.value.direction===`both`)&&i!==null?e*(i+a):_.query(e),p=i===null?_.get(e)-a:i,u=t.value.direction===`both`?R.value:d.value);let m=c.includes(e),v=s,y=l,x=!1,S={x:0,y:0};if(m){if(t.value.direction===`vertical`||t.value.direction===`both`){if(V.value>y){x=!0;let t,n=0,r=c.length-1;for(;n<=r;){let i=n+r>>>1;c[i]>e?(t=c[i],r=i-1):n=i+1}if(t!==void 0){let e=(i===null?_.query(t):t*(i+a))-V.value;e<p&&(S.y=-(p-e))}}}else if(t.value.direction===`horizontal`&&B.value>v){x=!0;let t,n=0,r=c.length-1;for(;n<=r;){let i=n+r>>>1;c[i]>e?(t=c[i],r=i-1):n=i+1}if(t!==void 0){let e=(i===null?g.query(t):t*(i+o))-B.value;e<u&&(S.x=-(u-e))}}}r.push({item:n,index:e,offset:{x:v-h,y:y-b},size:{width:u,height:p},originalX:v,originalY:y,isSticky:m,isStickyActive:x,stickyOffset:S})}return r}),re=b(()=>{y.value;let e=t.value.columnCount||0;if(!e)return{start:0,end:0,padStart:0,padEnd:0};if((!s.value||c.value)&&t.value.ssrRange){let{colStart:n=0,colEnd:r=0}=t.value.ssrRange;return{start:Math.max(0,n),end:Math.min(e,r||e),padStart:0,padEnd:0}}let n=v.findLowerBound(B.value),r=v.query(n),i=n;for(;i<e&&r<B.value+d.value;)r=v.query(++i);let a=t.value.ssrRange&&!o.value?0:2,l=Math.max(0,n-a),u=Math.min(e,i+a);return{start:l,end:u,padStart:v.query(l),padEnd:v.query(e)-v.query(u)}}),X=b(()=>{y.value;let e=F.value,n=t.value.columnGap||0,r=0;return(t.value.direction===`horizontal`||t.value.direction===`both`)&&(r=e===null?g.findLowerBound(B.value):Math.floor(B.value/(e+n))),{items:Y.value,currentIndex:J.value,currentColIndex:r,scrollOffset:{x:B.value,y:V.value},viewportSize:{width:d.value,height:f.value},totalSize:{width:R.value,height:z.value},isScrolling:o.value,isProgrammaticScroll:h.value,range:q.value,columnRange:re.value}}),ie=()=>{h.value=!1,E.value=null},ae=e=>{let t=e.target;typeof window>`u`||(t===window||t===document?(r.value=window.scrollX,i.value=window.scrollY):j(t)&&(r.value=t.scrollLeft,i.value=t.scrollTop),o.value||=(h.value||(E.value=null),!0),clearTimeout(m),m=setTimeout(()=>{o.value=!1,h.value=!1},250))},oe=e=>{let n=!1,r=t.value.gap||0,i=t.value.columnGap||0;for(let{index:a,inlineSize:o,blockSize:s,element:c}of e){if(k.value){if(t.value.direction===`horizontal`){let e=g.get(a),t=o+i;Math.abs(e-t)>.5&&(t>e||!S[a])&&(g.update(a,t-e),S[a]=1,n=!0)}if(t.value.direction===`vertical`||t.value.direction===`both`){let e=_.get(a),i=s+r;t.value.direction===`both`?(i>e||!T[a])&&(_.update(a,i-e),T[a]=1,n=!0):Math.abs(e-i)>.5&&(i>e||!T[a])&&(_.update(a,i-e),T[a]=1,n=!0)}}if(t.value.direction===`both`&&c&&t.value.columnCount&&P.value){let e=c.dataset.colIndex===void 0?Array.from(c.querySelectorAll(`[data-col-index]`)):[c];for(let r of e){let e=Number.parseInt(r.dataset.colIndex,10);if(e>=0&&e<(t.value.columnCount||0)){let t=r.offsetWidth,a=v.get(e),o=t+i;(o>a||!x[e])&&(v.update(e,o-a),x[e]=1,n=!0)}}}}n&&y.value++},se=(e,t,n,r)=>{oe([{index:e,inlineSize:t,blockSize:n,element:r}])},Z=()=>{if(E.value&&!c.value){let{rowIndex:e,colIndex:t,options:n}=E.value;U(e,t,ne(n)?{...n,isCorrection:!0}:{align:n,isCorrection:!0})}};a(y,Z),a(o,e=>{e||Z()});let Q=null,$=e=>{if(!e||typeof window>`u`)return;let t=e===window?document:e;if(t.addEventListener(`scroll`,ae,{passive:!0}),e===window){d.value=window.innerWidth,f.value=window.innerHeight,r.value=window.scrollX,i.value=window.scrollY;let e=()=>{d.value=window.innerWidth,f.value=window.innerHeight,K()};return window.addEventListener(`resize`,e),()=>{t.removeEventListener(`scroll`,ae),window.removeEventListener(`resize`,e)}}else return d.value=e.clientWidth,f.value=e.clientHeight,r.value=e.scrollLeft,i.value=e.scrollTop,Q=new ResizeObserver(t=>{for(let n of t)n.target===e&&(d.value=e.clientWidth,f.value=e.clientHeight,K())}),Q.observe(e),()=>{t.removeEventListener(`scroll`,ae),Q?.disconnect()}},ce;return n()&&(w(()=>{u.value=!0,a(()=>t.value.container,e=>{ce?.(),ce=$(e||null)},{immediate:!0}),K(),t.value.ssrRange||t.value.initialScrollIndex!==void 0?l(()=>{K();let e=t.value.initialScrollIndex===void 0?t.value.ssrRange?.start:t.value.initialScrollIndex,n=t.value.initialScrollAlign||`start`;e!=null&&U(e,t.value.ssrRange?.colStart,{align:n,behavior:`auto`}),s.value=!0,c.value=!0,l(()=>{c.value=!1})}):s.value=!0}),C(()=>{ce?.()})),{renderedItems:Y,totalWidth:R,totalHeight:z,scrollDetails:X,scrollToIndex:U,scrollToOffset:W,stopProgrammaticScroll:ie,updateItemSize:se,updateItemSizes:oe,updateHostOffset:K,columnRange:re,getColumnWidth:H,refresh:()=>{g.resize(0),_.resize(0),v.resize(0),x.fill(0),S.fill(0),T.fill(0),G()},isHydrated:s}}var F={key:0,class:`virtual-scroll-debug-info`},I=O(f({__name:`VirtualScroll`,props:{items:{},itemSize:{},direction:{default:`vertical`},bufferBefore:{default:5},bufferAfter:{default:5},container:{},ssrRange:{},columnCount:{default:0},columnWidth:{},containerTag:{default:`div`},wrapperTag:{default:`div`},itemTag:{default:`div`},scrollPaddingStart:{default:0},scrollPaddingEnd:{default:0},stickyHeader:{type:Boolean,default:!1},stickyFooter:{type:Boolean,default:!1},gap:{default:0},columnGap:{default:0},stickyIndices:{default:()=>[]},loadDistance:{default:50},loading:{type:Boolean,default:!1},restoreScrollOnPrepend:{type:Boolean,default:!1},initialScrollIndex:{},initialScrollAlign:{},defaultItemSize:{},defaultColumnWidth:{},debug:{type:Boolean,default:!1}},emits:[`scroll`,`load`,`visibleRangeChange`],setup(t,{expose:n,emit:l}){let d=t,f=l,v=b(()=>d.debug),y=e(null),S=e(null),T=e(null),ee=e(null),O=new Map,k=e(0),A=e(0),te=b(()=>{let e=d.container===void 0?y.value:d.container;return e===y.value||typeof window<`u`&&(e===window||e===null)}),{isHydrated:j,columnRange:ne,renderedItems:I,scrollDetails:L,totalHeight:R,totalWidth:z,getColumnWidth:B,scrollToIndex:V,scrollToOffset:H,updateHostOffset:U,updateItemSizes:W,refresh:G,stopProgrammaticScroll:K}=P(b(()=>{let e=d.scrollPaddingStart,t=d.scrollPaddingEnd,n=typeof e==`object`?e.x||0:d.direction===`horizontal`&&e||0,r=typeof e==`object`?e.y||0:d.direction===`horizontal`?0:e||0,i=typeof t==`object`?t.x||0:d.direction===`horizontal`&&t||0,a=typeof t==`object`?t.y||0:d.direction===`horizontal`?0:t||0;return{items:d.items,itemSize:d.itemSize,direction:d.direction,bufferBefore:d.bufferBefore,bufferAfter:d.bufferAfter,container:d.container===void 0?y.value:d.container,hostElement:S.value,ssrRange:d.ssrRange,columnCount:d.columnCount,columnWidth:d.columnWidth,scrollPaddingStart:{x:n,y:r+(d.stickyHeader&&te.value?k.value:0)},scrollPaddingEnd:{x:i,y:a+(d.stickyFooter&&te.value?A.value:0)},gap:d.gap,columnGap:d.columnGap,stickyIndices:d.stickyIndices,loadDistance:d.loadDistance,loading:d.loading,restoreScrollOnPrepend:d.restoreScrollOnPrepend,initialScrollIndex:d.initialScrollIndex,initialScrollAlign:d.initialScrollAlign,defaultItemSize:d.defaultItemSize,defaultColumnWidth:d.defaultColumnWidth,debug:v.value}}));a(L,(e,t)=>{j.value&&(f(`scroll`,e),(!t||e.range.start!==t.range.start||e.range.end!==t.range.end||e.columnRange.start!==t.columnRange.start||e.columnRange.end!==t.columnRange.end)&&f(`visibleRangeChange`,{start:e.range.start,end:e.range.end,colStart:e.columnRange.start,colEnd:e.columnRange.end}),!d.loading&&(d.direction!==`horizontal`&&e.totalSize.height-(e.scrollOffset.y+e.viewportSize.height)<=d.loadDistance&&f(`load`,`vertical`),d.direction!==`vertical`&&e.totalSize.width-(e.scrollOffset.x+e.viewportSize.width)<=d.loadDistance&&f(`load`,`horizontal`)))}),a(j,e=>{e&&f(`visibleRangeChange`,{start:L.value.range.start,end:L.value.range.end,colStart:L.value.columnRange.start,colEnd:L.value.columnRange.end})},{once:!0});let q=typeof window>`u`?null:new ResizeObserver(U),J=typeof window>`u`?null:new ResizeObserver(e=>{let t=[];for(let n of e){let e=n.target,r=Number(e.dataset.index);if(e.dataset.colIndex!==void 0)t.push({index:-1,inlineSize:0,blockSize:0,element:e});else if(!Number.isNaN(r)){let i=n.contentRect.width,a=n.contentRect.height;n.borderBoxSize&&n.borderBoxSize.length>0?(i=n.borderBoxSize[0].inlineSize,a=n.borderBoxSize[0].blockSize):(i=e.offsetWidth,a=e.offsetHeight),t.push({index:r,inlineSize:i,blockSize:a,element:e})}}t.length>0&&W(t)}),Y=typeof window>`u`?null:new ResizeObserver(()=>{k.value=T.value?.offsetHeight||0,A.value=ee.value?.offsetHeight||0,U()});a(T,(e,t)=>{t&&Y?.unobserve(t),e&&Y?.observe(e)},{immediate:!0}),a(ee,(e,t)=>{t&&Y?.unobserve(t),e&&Y?.observe(e)},{immediate:!0});let re=b(()=>I.value[0]?.index);a(re,(e,t)=>{if(d.direction===`both`){if(t!==void 0){let e=O.get(t);e&&e.querySelectorAll(`[data-col-index]`).forEach(e=>J?.unobserve(e))}if(e!==void 0){let t=O.get(e);t&&t.querySelectorAll(`[data-col-index]`).forEach(e=>J?.observe(e))}}},{flush:`post`}),w(()=>{y.value&&q?.observe(y.value);for(let e of O.values())J?.observe(e);if(re.value!==void 0){let e=O.get(re.value);e&&e.querySelectorAll(`[data-col-index]`).forEach(e=>J?.observe(e))}}),a([y,S],([e],[t])=>{t&&q?.unobserve(t),e&&q?.observe(e)});function X(e,t){if(e)O.set(t,e),J?.observe(e);else{let e=O.get(t);e&&(J?.unobserve(e),O.delete(t))}}function ie(e){K();let{viewportSize:t,scrollOffset:n}=L.value,r=d.direction!==`vertical`,i=d.direction!==`horizontal`;if(e.key===`Home`){e.preventDefault(),V(0,0,`start`);return}if(e.key===`End`){e.preventDefault();let t=d.items.length-1,n=(d.columnCount||0)>0?d.columnCount-1:0;r?i?V(t,n,`end`):V(0,t,`end`):V(t,0,`end`);return}if(e.key===`ArrowUp`){e.preventDefault(),H(null,n.y-40);return}if(e.key===`ArrowDown`){e.preventDefault(),H(null,n.y+40);return}if(e.key===`ArrowLeft`){e.preventDefault(),H(n.x-40,null);return}if(e.key===`ArrowRight`){e.preventDefault(),H(n.x+40,null);return}if(e.key===`PageUp`){e.preventDefault(),H(!i&&r?n.x-t.width:null,i?n.y-t.height:null);return}e.key===`PageDown`&&(e.preventDefault(),H(!i&&r?n.x+t.width:null,i?n.y+t.height:null))}C(()=>{q?.disconnect(),J?.disconnect(),Y?.disconnect()});let ae=b(()=>{let e=d.container;return e===null||typeof window<`u`&&e===window?!0:e&&typeof e==`object`&&`tagName`in e?e.tagName===`BODY`:!1}),oe=b(()=>ae.value?{...d.direction===`vertical`?{}:{whiteSpace:`nowrap`}}:d.containerTag===`table`?{minInlineSize:d.direction===`vertical`?`100%`:`auto`}:{...d.direction===`vertical`?{}:{whiteSpace:`nowrap`}}),se=b(()=>({inlineSize:d.direction===`vertical`?`100%`:`${z.value}px`,blockSize:d.direction===`horizontal`?`100%`:`${R.value}px`})),Z=b(()=>{let e=d.direction===`horizontal`;return{display:e?`inline-block`:`block`,...e?{blockSize:`100%`,verticalAlign:`top`}:{inlineSize:`100%`}}}),Q=b(()=>({inlineSize:d.direction===`vertical`?`1px`:`${z.value}px`,blockSize:d.direction===`horizontal`?`1px`:`${R.value}px`}));function $(e){let t=d.direction===`vertical`,n=d.direction===`horizontal`,r=d.direction===`both`,i=d.itemSize===void 0||d.itemSize===null||d.itemSize===0,a={blockSize:n?`100%`:i?`auto`:`${e.size.height}px`};return t&&d.containerTag===`table`?a.minInlineSize=`100%`:a.inlineSize=t?`100%`:i?`auto`:`${e.size.width}px`,i&&(t||(a.minInlineSize=`${e.size.width}px`),n||(a.minBlockSize=`${e.size.height}px`)),j.value&&(e.isStickyActive?((t||r)&&(a.insetBlockStart=`${N(d.scrollPaddingStart,d.direction)}px`),(n||r)&&(a.insetInlineStart=`${M(d.scrollPaddingStart,d.direction)}px`),a.transform=`translate(${e.stickyOffset.x}px, ${e.stickyOffset.y}px)`):a.transform=`translate(${e.offset.x}px, ${e.offset.y}px)`),a}return n({scrollDetails:L,columnRange:ne,getColumnWidth:B,scrollToIndex:V,scrollToOffset:H,refresh:G,stopProgrammaticScroll:K}),(e,n)=>(s(),E(r(t.containerTag),{ref_key:`hostRef`,ref:y,class:i([`virtual-scroll-container`,[`virtual-scroll--${t.direction}`,{"virtual-scroll--hydrated":m(j),"virtual-scroll--window":ae.value,"virtual-scroll--table":t.containerTag===`table`}]]),style:p(oe.value),tabindex:`0`,onKeydown:ie,onWheelPassive:m(K),onPointerdownPassive:m(K),onTouchstartPassive:m(K)},{default:o(()=>[e.$slots.header?(s(),E(r(t.containerTag===`table`?`thead`:`div`),{key:0,ref_key:`headerRef`,ref:T,class:i([`virtual-scroll-header`,{"virtual-scroll--sticky":t.stickyHeader}])},{default:o(()=>[u(e.$slots,`header`,{},void 0,!0)]),_:3},8,[`class`])):D(`v-if`,!0),(s(),E(r(t.wrapperTag),{ref_key:`wrapperRef`,ref:S,class:`virtual-scroll-wrapper`,style:p(se.value)},{default:o(()=>[D(` Phantom element to push scroll height `),t.containerTag===`table`?(s(),E(r(t.itemTag),{key:0,class:`virtual-scroll-spacer`,style:p(Q.value)},{default:o(()=>[...n[0]||=[g(`td`,{style:{padding:`0`,border:`none`,"block-size":`inherit`}},null,-1)]]),_:1},8,[`style`])):D(`v-if`,!0),(s(!0),_(x,null,c(m(I),n=>(s(),E(r(t.itemTag),{key:n.index,ref_for:!0,ref:e=>X(e,n.index),"data-index":n.index,class:i([`virtual-scroll-item`,{"virtual-scroll--sticky":n.isStickyActive,"virtual-scroll--debug":v.value}]),style:p($(n))},{default:o(()=>[u(e.$slots,`item`,{item:n.item,index:n.index,columnRange:m(ne),getColumnWidth:m(B),isSticky:n.isSticky,isStickyActive:n.isStickyActive},void 0,!0),v.value?(s(),_(`div`,F,` #`+h(n.index)+` (`+h(Math.round(n.offset.x))+`, `+h(Math.round(n.offset.y))+`) `,1)):D(`v-if`,!0)]),_:2},1032,[`data-index`,`class`,`style`]))),128))]),_:3},8,[`style`])),t.loading&&e.$slots.loading?(s(),_(`div`,{key:1,class:`virtual-scroll-loading`,style:p(Z.value)},[u(e.$slots,`loading`,{},void 0,!0)],4)):D(`v-if`,!0),e.$slots.footer?(s(),E(r(t.containerTag===`table`?`tfoot`:`div`),{key:2,ref_key:`footerRef`,ref:ee,class:i([`virtual-scroll-footer`,{"virtual-scroll--sticky":t.stickyFooter}])},{default:o(()=>[u(e.$slots,`footer`,{},void 0,!0)]),_:3},8,[`class`])):D(`v-if`,!0)]),_:3},40,[`class`,`style`,`onWheelPassive`,`onPointerdownPassive`,`onTouchstartPassive`]))}}),[[`__scopeId`,`data-v-edc8f287`]]),L={class:`space-y-2 md:space-y-4`},R={key:0,class:`prose max-w-none`},z={class:`card card-side bg-base-300 shadow-sm border border-base-300`},B={key:0,class:`shrink-0 flex items-start justify-center pt-5.5 ps-4`},V={class:`card-body p-4`},H={class:`flex items-center justify-between`},U={key:0,class:`text-lg m-0`},W={key:0,class:`opacity-85 m-0`},G={class:`flex items-center justify-between px-4 py-2`},K={class:`tabs tabs-boxed bg-transparent p-0`},q={key:0,xmlns:`http://www.w3.org/2000/svg`,fill:`none`,viewBox:`0 0 24 24`,"stroke-width":`1.5`,stroke:`currentColor`,class:`size-4`},J={key:1,xmlns:`http://www.w3.org/2000/svg`,fill:`none`,viewBox:`0 0 24 24`,"stroke-width":`1.5`,stroke:`currentColor`,class:`size-4 text-success`},Y={class:`flex-1 mx-4 mb-4 overflow-auto rounded-box`},re=f({__name:`ExampleContainer`,props:{height:{default:`min(50dvh, 600px)`},minHeight:{default:`min(10dvh, 50px)`},minWidth:{default:`min(10vw, 50px)`},code:{}},setup(n){let r=n,a=e(`preview`),o=e(!1),c={blockSize:r.height,minBlockSize:r.minHeight,minInlineSize:r.minWidth};async function l(){r.code&&(await navigator.clipboard.writeText(r.code),o.value=!0,setTimeout(()=>{o.value=!1},2e3))}let f=v(),p=b(()=>T(`/`,f.urlPathname)||T(`/index`,f.urlPathname));return(e,r)=>(s(),_(`div`,L,[e.$slots.title||e.$slots.description?(s(),_(`div`,R,[g(`div`,z,[e.$slots.icon?(s(),_(`figure`,B,[u(e.$slots,`icon`)])):D(`v-if`,!0),g(`div`,V,[g(`div`,H,[e.$slots.title?(s(),_(`h1`,U,[u(e.$slots,`title`),u(e.$slots,`subtitle`)])):D(`v-if`,!0),p.value?D(`v-if`,!0):(s(),_(`button`,{key:1,class:`btn btn-xs btn-ghost gap-1 opacity-90 hover:opacity-100`,onClick:r[0]||=e=>m(S)(`/`,`back`)},[...r[3]||=[g(`svg`,{xmlns:`http://www.w3.org/2000/svg`,fill:`none`,viewBox:`0 0 24 24`,"stroke-width":`1.5`,stroke:`currentColor`,class:`size-3`},[g(`path`,{"stroke-linecap":`round`,"stroke-linejoin":`round`,d:`M9 15 3 9m0 0 6-6M3 9h12a6 6 0 0 1 0 12h-3`})],-1),g(`span`,{class:`max-sm:hidden`},`Back to Welcome`,-1)]]))]),e.$slots.description?(s(),_(`div`,W,[u(e.$slots,`description`)])):D(`v-if`,!0)])])])):D(`v-if`,!0),u(e.$slots,`controls`),g(`div`,{class:`flex flex-col bg-base-300 border border-primary/10 rounded-box overflow-hidden resize`,style:c},[g(`div`,G,[g(`div`,K,[g(`button`,{class:i([`tab tab-sm`,{"tab-active":a.value===`preview`}]),onClick:r[1]||=e=>a.value=`preview`},` Preview `,2),g(`button`,{class:i([`tab tab-sm`,{"tab-active":a.value===`code`}]),onClick:r[2]||=e=>a.value=`code`},` Code `,2)]),a.value===`code`&&n.code?(s(),_(`button`,{key:0,class:`btn btn-ghost btn-xs gap-2`,onClick:l},[o.value?(s(),_(`svg`,J,[...r[5]||=[g(`path`,{"stroke-linecap":`round`,"stroke-linejoin":`round`,d:`m4.5 12.75 6 6 9-13.5`},null,-1)]])):(s(),_(`svg`,q,[...r[4]||=[g(`path`,{"stroke-linecap":`round`,"stroke-linejoin":`round`,d:`M15.666 3.888A2.25 2.25 0 0 0 13.5 2.25h-3c-1.03 0-2.013.447-2.725 1.212L4.435 7.763a2.25 2.25 0 0 0-.593 1.51V18a2.25 2.25 0 0 0 2.25 2.25h11.25A2.25 2.25 0 0 0 19.5 18v-4.5m-3-10.5 3 3m-3-3h-1.5a2.25 2.25 0 0 0-2.25 2.25v1.5m3-3 3 3m-9-3h2.25A2.25 2.25 0 0 1 15 11.25V18`},null,-1)]])),t(` `+h(o.value?`Copied!`:`Copy`),1)])):D(`v-if`,!0)]),d(g(`div`,Y,[u(e.$slots,`default`)],512),[[y,a.value===`preview`]]),n.code?d((s(),E(k,{key:0,class:`flex-1 mx-4 rounded-box`,lang:`vue`,code:n.code,"line-numbers":``},null,8,[`code`])),[[y,a.value===`code`]]):D(`v-if`,!0)])]))}}),X=[],ie=[],ae=60,oe=!0,se=0,Z=null;const Q=e(0),$=e(null),ce=b(()=>!$.value||$.value===0?0:Math.min(100,Math.round(Q.value/$.value*100)));function le(e){if(se!==0){let t=e-se;if(oe&&(ie.push(t),ie.length>=ae)){let e=[...ie].sort((e,t)=>e-t),t=e[Math.floor(e.length/4)],n=Math.round(1e3/t);$.value=[60,75,90,120,144,165,240,360].reduce((e,t)=>Math.abs(t-n)<Math.abs(e-n)?t:e),oe=!1}if(X.push(t),X.length>20&&X.shift(),X.length>=5){let e=X.reduce((e,t)=>e+t,0)/X.length,t=Math.round(1e3/e);Math.abs(Q.value-t)>.5&&(Q.value=t)}}se=e,Z=requestAnimationFrame(le)}function ue(){Z=requestAnimationFrame(le)}function de(){Z&&cancelAnimationFrame(Z)}var fe={class:`max-sm:w-full min-w-84 list bg-base-300 rounded-box shadow-md text-sm pointer-events-auto`},pe={class:`list-row py-4 items-center`},me={class:`grid *:[grid-area:1/1]`},he={key:0,class:`font-bold flex items-center gap-2`},ge={class:`list-row py-1.5 items-center`},_e={class:`uppercase font-semibold`},ve={class:`list-row py-1.5 items-center`},ye={class:`font-semibold`},be={class:`list-row py-1.5 items-center`},xe={class:`font-semibold`},Se={class:`list-row py-1.5 items-center`},Ce={class:`font-semibold`},we={class:`list-row py-1.5 items-center`},Te={class:`font-semibold`},Ee={class:`list-row py-1.5 items-center`},De={class:`font-semibold`},Oe=f({__name:`ScrollStatus`,props:{scrollDetails:{},direction:{},columnRange:{}},setup(e){let n=e,r=b(()=>({start:n.scrollDetails?.items[0]?.index??0,end:n.scrollDetails?.items[n.scrollDetails?.items.length-1]?.index??0})),a=b(()=>{let e=ce.value;return e>90?`status-success`:e>60?`status-warning`:`status-error`});return w(ue),C(de),(n,o)=>(s(),_(`ul`,fe,[g(`li`,pe,[o[0]||=g(`div`,{class:`opacity-90 tracking-wide uppercase`},`Scroll Status`,-1),g(`div`,me,[e.scrollDetails?.isScrolling?(s(),_(`div`,{key:0,class:i([`status status-lg animate-ping`,a.value])},null,2)):D(`v-if`,!0),g(`div`,{class:i([`status status-lg`,a.value])},null,2)]),o[1]||=g(`div`,null,null,-1),m($)?(s(),_(`div`,he,h(m(Q))+` / `+h(m($))+` fps `,1)):D(`v-if`,!0)]),g(`li`,ge,[o[2]||=g(`div`,{class:`opacity-85`},`Direction`,-1),o[3]||=g(`div`,null,null,-1),g(`div`,_e,h(e.direction||`vertical`),1)]),g(`li`,ve,[o[4]||=g(`div`,{class:`opacity-85`},`Total Size (px)`,-1),o[5]||=g(`div`,null,null,-1),g(`div`,ye,[e.direction===`vertical`?D(`v-if`,!0):(s(),_(x,{key:0},[t(h(Math.round(e.scrollDetails?.totalSize.width||0)),1)],64)),e.direction===`both`?(s(),_(x,{key:1},[t(` × `)],64)):D(`v-if`,!0),e.direction===`horizontal`?D(`v-if`,!0):(s(),_(x,{key:2},[t(h(Math.round(e.scrollDetails?.totalSize.height||0)),1)],64))])]),g(`li`,be,[o[6]||=g(`div`,{class:`opacity-85`},`Viewport Size (px)`,-1),o[7]||=g(`div`,null,null,-1),g(`div`,xe,[e.direction===`vertical`?D(`v-if`,!0):(s(),_(x,{key:0},[t(h(Math.round(e.scrollDetails?.viewportSize.width||0)),1)],64)),e.direction===`both`?(s(),_(x,{key:1},[t(` × `)],64)):D(`v-if`,!0),e.direction===`horizontal`?D(`v-if`,!0):(s(),_(x,{key:2},[t(h(Math.round(e.scrollDetails?.viewportSize.height||0)),1)],64))])]),g(`li`,Se,[o[8]||=g(`div`,{class:`opacity-85`},`Scroll Offset (px)`,-1),o[9]||=g(`div`,null,null,-1),g(`div`,Ce,[e.direction===`vertical`?D(`v-if`,!0):(s(),_(x,{key:0},[t(h(Math.round(e.scrollDetails?.scrollOffset.x||0)),1)],64)),e.direction===`both`?(s(),_(x,{key:1},[t(` × `)],64)):D(`v-if`,!0),e.direction===`horizontal`?D(`v-if`,!0):(s(),_(x,{key:2},[t(h(Math.round(e.scrollDetails?.scrollOffset.y||0)),1)],64))])]),g(`li`,we,[o[10]||=g(`div`,{class:`opacity-85`},`Current Item #`,-1),o[11]||=g(`div`,null,null,-1),g(`div`,Te,[t(h(e.scrollDetails?.currentIndex)+` `,1),e.direction===`both`?(s(),_(x,{key:0},[t(` × `+h(e.scrollDetails?.currentColIndex),1)],64)):D(`v-if`,!0)])]),g(`li`,Ee,[o[12]||=g(`div`,{class:`opacity-85`},`Rendered Range #`,-1),o[13]||=g(`div`,null,null,-1),g(`div`,De,[t(h(r.value.start)+`:`+h(r.value.end)+` `,1),e.columnRange?(s(),_(x,{key:0},[t(` × `+h(e.columnRange.start)+`:`+h(e.columnRange.end),1)],64)):D(`v-if`,!0)])])]))}});export{re as n,I as r,Oe as t};