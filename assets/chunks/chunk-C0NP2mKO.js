const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/chunks/chunk-Cp-ATCer.js","assets/chunks/chunk-CtNc6juC.js"])))=>i.map(i=>d[i]);
import{A as e,E as t,F as n,G as r,H as i,I as a,K as o,L as s,M as c,N as l,O as u,P as d,R as f,T as p,U as m,V as h,W as g,_,b as v,g as y,h as b,j as x,k as S,v as C,y as w,z as T}from"./chunk-BlgwXZRf.js";import{t as E}from"./chunk-CtNc6juC.js";var D=class{tree;values;constructor(e){this.tree=new Float64Array(e+1),this.values=new Float64Array(e)}update(e,t){if(!(e<0||e>=this.values.length))for(this.values[e]=this.values[e]+t,e++;e<this.tree.length;)this.tree[e]=this.tree[e]+t,e+=e&-e}query(e){let t=0;for(;e>0;)t+=this.tree[e]||0,e-=e&-e;return t}set(e,t){e<0||e>=this.values.length||(this.values[e]=t)}get length(){return this.values.length}get(e){return this.values[e]||0}getValues(){return this.values}findLowerBound(e){let t=0,n=this.tree.length,r=1<<Math.floor(Math.log2(n-1));for(;r>0;){let i=t+r;if(i<n){let n=this.tree[i]||0;n<=e&&(t=i,e-=n)}r>>=1}return t}rebuild(){this.tree.fill(0);for(let e=0;e<this.values.length;e++)this.tree[e+1]=this.values[e]||0;for(let e=1;e<this.tree.length;e++){let t=e+(e&-e);t<this.tree.length&&(this.tree[t]=this.tree[t]+this.tree[e])}}resize(e){if(e===this.values.length)return;let t=new Float64Array(e);t.set(this.values.subarray(0,Math.min(e,this.values.length))),this.values=t,this.tree=new Float64Array(e+1),this.rebuild()}shift(e){if(e===0)return;let t=this.values.length,n=new Float64Array(t);e>0?n.set(this.values.subarray(0,Math.min(t-e,this.values.length)),e):n.set(this.values.subarray(-e)),this.values=n,this.rebuild()}};function ee(e){return!!e&&`getBoundingClientRect`in e}function O(e){return!!e&&`scrollLeft`in e}function te(e){return typeof e==`object`&&!!e&&(`align`in e||`behavior`in e||`isCorrection`in e)}function k(e,t){return typeof e==`object`&&e?e.x||0:t===`horizontal`&&e||0}function A(e,t){return typeof e==`object`&&e?e.y||0:(t===`vertical`||t===`both`)&&e||0}const j=40,M=100,N=5;function P(n){let r=i(0),a=i(0),o=i(!1),s=i(!1),l=i(!1),d=i(!1),p=i(0),m=i(0),g=h({x:0,y:0}),_,v=i(!1),b=new D(n.value.items.length),x=new D(n.value.items.length),S=new D(n.value.columnCount||0),C=i(0),w=new Uint8Array,T=new Uint8Array,E=new Uint8Array,j=i(null),M=i(!1),N=[],P=y(()=>n.value.itemSize===void 0||n.value.itemSize===null||n.value.itemSize===0),F=y(()=>n.value.columnWidth===void 0||n.value.columnWidth===null||n.value.columnWidth===0),I=y(()=>typeof n.value.itemSize==`number`&&n.value.itemSize>0?n.value.itemSize:null),L=y(()=>n.value.defaultItemSize||I.value||40),R=y(()=>[...n.value.stickyIndices||[]].sort((e,t)=>e-t)),z=y(()=>{if(C.value,!s.value&&n.value.ssrRange&&!d.value){let{start:e=0,end:t=0,colStart:r=0,colEnd:i=0}=n.value.ssrRange,a=n.value.columnCount||0;if(n.value.direction===`both`){if(a<=0)return 0;let e=i||a,t=S.query(e)-S.query(r);return Math.max(0,t-(e>r&&n.value.columnGap||0))}if(n.value.direction===`horizontal`){if(I.value!==null){let r=t-e;return Math.max(0,r*(I.value+(n.value.columnGap||0))-(r>0&&n.value.columnGap||0))}let r=b.query(t)-b.query(e);return Math.max(0,r-(t>e&&n.value.columnGap||0))}}if(n.value.direction===`both`){let e=n.value.columnCount||0;if(e<=0)return 0;let t=S.query(e);return Math.max(0,t-(n.value.columnGap||0))}if(n.value.direction===`vertical`)return 0;if(I.value!==null){let e=n.value.items.length;return Math.max(0,e*(I.value+(n.value.columnGap||0))-(e>0&&n.value.columnGap||0))}let e=b.query(n.value.items.length);return Math.max(0,e-(n.value.items.length>0&&n.value.columnGap||0))}),B=y(()=>{if(C.value,!s.value&&n.value.ssrRange&&!d.value){let{start:e,end:t}=n.value.ssrRange;if(n.value.direction===`vertical`||n.value.direction===`both`){if(I.value!==null){let r=t-e;return Math.max(0,r*(I.value+(n.value.gap||0))-(r>0&&n.value.gap||0))}let r=x.query(t)-x.query(e);return Math.max(0,r-(t>e&&n.value.gap||0))}}if(n.value.direction===`horizontal`)return 0;if(I.value!==null){let e=n.value.items.length;return Math.max(0,e*(I.value+(n.value.gap||0))-(e>0&&n.value.gap||0))}let e=x.query(n.value.items.length);return Math.max(0,e-(n.value.items.length>0&&n.value.gap||0))}),V=y(()=>{let e=n.value.direction===`horizontal`||n.value.direction===`both`?k(n.value.scrollPaddingStart,n.value.direction):0;return Math.max(0,r.value+e-g.x)}),H=y(()=>{let e=n.value.direction===`vertical`||n.value.direction===`both`?A(n.value.scrollPaddingStart,n.value.direction):0;return Math.max(0,a.value+e-g.y)}),U=e=>{C.value;let t=n.value.columnWidth;if(typeof t==`number`&&t>0)return t;if(Array.isArray(t)&&t.length>0){let r=t[e%t.length];return r!=null&&r>0?r:n.value.defaultColumnWidth||100}return typeof t==`function`?t(e):S.get(e)||n.value.defaultColumnWidth||100},W=(e,t,i)=>{let s=typeof i==`object`&&i&&`isCorrection`in i?i.isCorrection:!1;s||(j.value={rowIndex:e,colIndex:t,options:i});let c=n.value.container||window,l=I.value,u=n.value.gap||0,d=n.value.columnGap||0,f,h;te(i)?(f=i.align,h=i.behavior):f=i;let _=(typeof f==`object`?f.x:f)||`auto`,y=(typeof f==`object`?f.y:f)||`auto`,C=k(n.value.scrollPaddingStart,n.value.direction),w=k(n.value.scrollPaddingEnd,n.value.direction),T=A(n.value.scrollPaddingStart,n.value.direction),E=A(n.value.scrollPaddingEnd,n.value.direction),D=n.value.direction===`vertical`||n.value.direction===`both`,M=n.value.direction===`horizontal`||n.value.direction===`both`,N=p.value-(M?C+w:0),P=m.value-(D?T+E:0),F=V.value,L=H.value,R=0,U=0;if(e!=null&&(e>=n.value.items.length?(L=B.value,U=0):(L=l===null?x.query(e):e*(l+u),U=l===null?x.get(e)-u:l),y===`start`||(y===`center`?L-=(P-U)/2:y===`end`?L-=P-U:L>=H.value&&L+U<=H.value+P||L<H.value||(L-=P-U))),t!=null){let e=n.value.columnCount||0;t>=e&&e>0?(F=z.value,R=0):n.value.direction===`horizontal`?(F=l===null?b.query(t):t*(l+d),R=l===null?b.get(t)-d:l):(F=S.query(t),R=S.get(t)-d),_===`start`||(_===`center`?F-=(N-R)/2:_===`end`?F-=N-R:F>=V.value&&F+R<=V.value+N||F<V.value||(F-=N-R))}F=Math.max(0,Math.min(F,Math.max(0,z.value-N))),L=Math.max(0,Math.min(L,Math.max(0,B.value-P)));let W=F+g.x-(M?C:0),G=L+g.y-(D?T:0),K=t==null||Math.abs(V.value-F)<1,q=e==null||Math.abs(H.value-L)<1;if(!K||!q){let n=0,r=0,i=0,a=0,o=0,s=0;if(typeof window<`u`){if(c===window?(n=window.scrollX,r=window.scrollY,i=document.documentElement.scrollWidth,a=document.documentElement.scrollHeight,o=window.innerWidth,s=window.innerHeight):ee(c)&&(n=c.scrollLeft,r=c.scrollTop,i=c.scrollWidth,a=c.scrollHeight,o=c.clientWidth,s=c.clientHeight),!K&&t!=null){let e=n<=1&&W<=1,t=n>=i-o-1&&W>=i-o-1;(e||t)&&(K=!0)}if(!q&&e!=null){let e=r<=1&&G<=1,t=r>=a-s-1&&G>=a-s-1;(e||t)&&(q=!0)}}}let J=s?`auto`:h||`smooth`;if(v.value=!0,typeof window<`u`&&c===window)window.scrollTo({left:t==null?void 0:Math.max(0,W),top:e==null?void 0:Math.max(0,G),behavior:J});else if(O(c)){let n={behavior:J};t!=null&&(n.left=Math.max(0,W)),e!=null&&(n.top=Math.max(0,G)),typeof c.scrollTo==`function`?c.scrollTo(n):(n.left!==void 0&&(c.scrollLeft=n.left),n.top!==void 0&&(c.scrollTop=n.top))}(J===`auto`||J===void 0)&&(t!=null&&(r.value=Math.max(0,W)),e!=null&&(a.value=Math.max(0,G))),K&&q&&!o.value&&(j.value=null)},G=(e,t,i)=>{let o=n.value.container||window;v.value=!0;let s=n.value.direction===`vertical`||n.value.direction===`both`,c=n.value.direction===`horizontal`||n.value.direction===`both`,l=k(n.value.scrollPaddingStart,n.value.direction),u=A(n.value.scrollPaddingStart,n.value.direction),d=k(n.value.scrollPaddingEnd,n.value.direction),f=A(n.value.scrollPaddingEnd,n.value.direction),h=p.value-(c?l+d:0),_=m.value-(s?u+f:0),y=e==null?null:c?Math.max(0,Math.min(e,Math.max(0,z.value-h))):Math.max(0,e),b=t==null?null:s?Math.max(0,Math.min(t,Math.max(0,B.value-_))):Math.max(0,t),x=typeof window<`u`&&o===window?window.scrollX:o.scrollLeft,S=typeof window<`u`&&o===window?window.scrollY:o.scrollTop,C=y===null?x:y+g.x-(c?l:0),w=b===null?S:b+g.y-(s?u:0);if(typeof window<`u`&&o===window)window.scrollTo({left:e==null?void 0:C,top:t==null?void 0:w,behavior:i?.behavior||`auto`});else if(O(o)){let n={behavior:i?.behavior||`auto`};e!=null&&(n.left=C),t!=null&&(n.top=w),typeof o.scrollTo==`function`?o.scrollTo(n):(n.left!==void 0&&(o.scrollLeft=n.left),n.top!==void 0&&(o.scrollTop=n.top))}(i?.behavior===`auto`||i?.behavior===void 0)&&(e!=null&&(r.value=C),t!=null&&(a.value=w))},K=()=>{let e=n.value.items,t=e.length,r=n.value.columnCount||0;if(b.resize(t),x.resize(t),S.resize(r),T.length!==t){let e=new Uint8Array(t);e.set(T.subarray(0,Math.min(t,T.length))),T=e}if(E.length!==t){let e=new Uint8Array(t);e.set(E.subarray(0,Math.min(t,E.length))),E=e}if(w.length!==r){let e=new Uint8Array(r);e.set(w.subarray(0,Math.min(r,w.length))),w=e}let i=0;if(n.value.restoreScrollOnPrepend&&N.length>0&&t>N.length){let n=N[0];if(n!==void 0){for(let r=1;r<=t-N.length;r++)if(e[r]===n){i=r;break}}}if(i>0){b.shift(i),x.shift(i),j.value&&j.value.rowIndex!==null&&j.value.rowIndex!==void 0&&(j.value.rowIndex+=i);let r=new Uint8Array(t),a=new Uint8Array(t);r.set(T.subarray(0,Math.min(t-i,T.length)),i),a.set(E.subarray(0,Math.min(t-i,E.length)),i),T=r,E=a;let o=n.value.gap||0,s=n.value.columnGap||0,c=0,l=0;for(let t=0;t<i;t++){let r=typeof n.value.itemSize==`function`?n.value.itemSize(e[t],t):L.value;n.value.direction===`horizontal`?c+=r+s:l+=r+o}(c>0||l>0)&&u(()=>{G(c>0?V.value+c:null,l>0?H.value+l:null,{behavior:`auto`})})}if(r>0){let e=n.value.columnGap||0,t=!1;for(let n=0;n<r;n++){let r=U(n),i=S.get(n),a=w[n]===1;if(!F.value||!a||i===0){let a=r+e;Math.abs(i-a)>.5?(S.set(n,a),w[n]=F.value?0:1,t=!0):F.value||(w[n]=1)}}t&&S.rebuild()}let a=n.value.gap||0,o=n.value.columnGap||0,s=!1;for(let e=0;e<t;e++){let t=n.value.items[e],r=b.get(e),i=x.get(e),c=typeof n.value.itemSize==`function`?n.value.itemSize(t,e):L.value,l=n.value.direction===`vertical`,u=n.value.direction===`horizontal`,d=n.value.direction===`both`,f=u?c+o:0,p=l||d?c+a:0,m=T[e]===1,h=E[e]===1;u?(!P.value||!m||r===0)&&(Math.abs(r-f)>.5?(b.set(e,f),T[e]=P.value?0:1,s=!0):P.value||(T[e]=1)):r!==0&&(b.set(e,0),T[e]=0,s=!0),l||d?(!P.value||!h||i===0)&&(Math.abs(i-p)>.5?(x.set(e,p),E[e]=P.value?0:1,s=!0):P.value||(E[e]=1)):i!==0&&(x.set(e,0),E[e]=0,s=!0)}s&&(b.rebuild(),x.rebuild()),N=[...e],M.value=!0,C.value++},q=()=>{if(n.value.hostElement&&typeof window<`u`){let e=n.value.hostElement.getBoundingClientRect(),t=n.value.container||window,r=0,i=0;if(t===window)r=e.left+window.scrollX,i=e.top+window.scrollY;else if(t===n.value.hostElement)r=0,i=0;else if(ee(t)){let n=t.getBoundingClientRect();r=e.left-n.left+t.scrollLeft,i=e.top-n.top+t.scrollTop}(Math.abs(g.x-r)>.1||Math.abs(g.y-i)>.1)&&(g.x=r,g.y=i)}};f([()=>n.value.items,()=>n.value.direction,()=>n.value.columnCount,()=>n.value.columnWidth,()=>n.value.itemSize,()=>n.value.gap,()=>n.value.columnGap,()=>n.value.defaultItemSize,()=>n.value.defaultColumnWidth],K,{immediate:!0}),f(()=>[n.value.container,n.value.hostElement],()=>{q()});let J=y(()=>{if(C.value,(!s.value||l.value)&&n.value.ssrRange)return{start:n.value.ssrRange.start,end:n.value.ssrRange.end};let e=n.value.direction||`vertical`,t=n.value.ssrRange&&!o.value?0:n.value.bufferBefore??5,r=n.value.bufferAfter??5,i=n.value.gap||0,a=n.value.columnGap||0,c=I.value,u=k(n.value.scrollPaddingStart,e),d=k(n.value.scrollPaddingEnd,e),f=A(n.value.scrollPaddingStart,e),h=A(n.value.scrollPaddingEnd,e),g=e===`vertical`||e===`both`,_=e===`horizontal`||e===`both`,v=p.value-(_?u+d:0),y=m.value-(g?f+h:0),S=0,w=n.value.items.length;if(g)if(c!==null)S=Math.floor(H.value/(c+i)),w=Math.ceil((H.value+y)/(c+i));else{S=x.findLowerBound(H.value);let e=x.query(S),t=S;for(;t<n.value.items.length&&e<H.value+y;)e=x.query(++t);w=t}else if(c!==null)S=Math.floor(V.value/(c+a)),w=Math.ceil((V.value+v)/(c+a));else{S=b.findLowerBound(V.value);let e=b.query(S),t=S;for(;t<n.value.items.length&&e<V.value+v;)e=b.query(++t);w=t}return{start:Math.max(0,S-t),end:Math.min(n.value.items.length,w+r)}}),Y=y(()=>{C.value;let e=I.value,t=n.value.gap||0,r=n.value.columnGap||0;return n.value.direction===`horizontal`?e===null?b.findLowerBound(V.value):Math.floor(V.value/(e+r)):e===null?x.findLowerBound(H.value):Math.floor(H.value/(e+t))}),X=y(()=>{C.value;let{start:e,end:t}=J.value,r=[],i=I.value,a=n.value.gap||0,o=n.value.columnGap||0,c=R.value,l=new Set;for(let n=e;n<t;n++)l.add(n);if(s.value||!n.value.ssrRange){let n=Y.value,r,i=0,a=c.length-1;for(;i<=a;){let e=i+a>>>1;c[e]<n?(r=c[e],i=e+1):a=e-1}r!==void 0&&l.add(r);for(let n of c)n>=e&&n<t&&l.add(n)}let u=Array.from(l).sort((e,t)=>e-t),d=n.value.ssrRange?.start||0,f=n.value.ssrRange?.colStart||0,h=0,g=0;!s.value&&n.value.ssrRange&&(g=n.value.direction===`vertical`||n.value.direction===`both`?i===null?x.query(d):d*(i+a):0,n.value.direction===`horizontal`?h=i===null?b.query(f):f*(i+o):n.value.direction===`both`&&(h=S.query(f)));for(let e of u){let t=n.value.items[e];if(t===void 0)continue;let s=0,l=0,u=0,d=0;n.value.direction===`horizontal`?(s=i===null?b.query(e):e*(i+o),u=i===null?b.get(e)-o:i,d=m.value):(l=(n.value.direction===`vertical`||n.value.direction===`both`)&&i!==null?e*(i+a):x.query(e),d=i===null?x.get(e)-a:i,u=n.value.direction===`both`?z.value:p.value);let f=c.includes(e),_=s,v=l,y=!1,S={x:0,y:0};if(f){if(n.value.direction===`vertical`||n.value.direction===`both`){if(H.value>v){y=!0;let t,n=0,r=c.length-1;for(;n<=r;){let i=n+r>>>1;c[i]>e?(t=c[i],r=i-1):n=i+1}if(t!==void 0){let e=(i===null?x.query(t):t*(i+a))-H.value;e<d&&(S.y=-(d-e))}}}else if(n.value.direction===`horizontal`&&V.value>_){y=!0;let t,n=0,r=c.length-1;for(;n<=r;){let i=n+r>>>1;c[i]>e?(t=c[i],r=i-1):n=i+1}if(t!==void 0){let e=(i===null?b.query(t):t*(i+o))-V.value;e<u&&(S.x=-(u-e))}}}r.push({item:t,index:e,offset:{x:_-h,y:v-g},size:{width:u,height:d},originalX:_,originalY:v,isSticky:f,isStickyActive:y,stickyOffset:S})}return r}),ne=y(()=>{C.value;let e=n.value.columnCount||0;if(!e)return{start:0,end:0,padStart:0,padEnd:0};if((!s.value||l.value)&&n.value.ssrRange){let{colStart:t=0,colEnd:r=0}=n.value.ssrRange;return{start:Math.max(0,t),end:Math.min(e,r||e),padStart:0,padEnd:0}}let t=S.findLowerBound(V.value),r=S.query(t),i=t;for(;i<e&&r<V.value+p.value;)r=S.query(++i);let a=n.value.ssrRange&&!o.value?0:2,c=Math.max(0,t-a),u=Math.min(e,i+a);return{start:c,end:u,padStart:S.query(c),padEnd:S.query(e)-S.query(u)}}),re=y(()=>{C.value;let e=I.value,t=n.value.columnGap||0,r=0;return(n.value.direction===`horizontal`||n.value.direction===`both`)&&(r=e===null?b.findLowerBound(V.value):Math.floor(V.value/(e+t))),{items:X.value,currentIndex:Y.value,currentColIndex:r,scrollOffset:{x:V.value,y:H.value},viewportSize:{width:p.value,height:m.value},totalSize:{width:z.value,height:B.value},isScrolling:o.value,isProgrammaticScroll:v.value,range:J.value,columnRange:ne.value}}),ie=()=>{v.value=!1,j.value=null},Z=e=>{let t=e.target;typeof window>`u`||(t===window||t===document?(r.value=window.scrollX,a.value=window.scrollY):O(t)&&(r.value=t.scrollLeft,a.value=t.scrollTop),o.value||=(v.value||(j.value=null),!0),clearTimeout(_),_=setTimeout(()=>{o.value=!1,v.value=!1},250))},ae=e=>{let t=!1,r=n.value.gap||0,i=n.value.columnGap||0;for(let{index:a,inlineSize:o,blockSize:s,element:c}of e){if((P.value||typeof n.value.itemSize==`function`)&&a>=0){if(n.value.direction===`horizontal`){let e=b.get(a),n=o+i;(!T[a]||Math.abs(n-e)>.5)&&(b.update(a,n-e),T[a]=1,t=!0)}if(n.value.direction===`vertical`||n.value.direction===`both`){let e=x.get(a),i=s+r;n.value.direction,(!E[a]||Math.abs(i-e)>.5)&&(x.update(a,i-e),E[a]=1,t=!0)}}let e=F.value||typeof n.value.columnWidth==`function`;if(n.value.direction===`both`&&c&&n.value.columnCount&&e){let e=c.dataset.colIndex===void 0?Array.from(c.querySelectorAll(`[data-col-index]`)):[c];for(let r of e){let e=Number.parseInt(r.dataset.colIndex,10);if(e>=0&&e<(n.value.columnCount||0)){let n=r.offsetWidth,a=S.get(e),o=n+i;Math.abs(a-o)>.5&&(S.update(e,o-a),w[e]=1,t=!0)}}}}t&&C.value++},oe=(e,t,n,r)=>{ae([{index:e,inlineSize:t,blockSize:n,element:r}])},Q=()=>{if(j.value&&!l.value){let{rowIndex:e,colIndex:t,options:n}=j.value;W(e,t,te(n)?{...n,isCorrection:!0}:{align:n,isCorrection:!0})}};f(C,Q),f(o,e=>{e||Q()});let $=null,se=e=>{if(!e||typeof window>`u`)return;let t=e===window?document:e;if(t.addEventListener(`scroll`,Z,{passive:!0}),e===window){p.value=window.innerWidth,m.value=window.innerHeight,r.value=window.scrollX,a.value=window.scrollY;let e=()=>{p.value=window.innerWidth,m.value=window.innerHeight,q()};return window.addEventListener(`resize`,e),()=>{t.removeEventListener(`scroll`,Z),window.removeEventListener(`resize`,e)}}else return p.value=e.clientWidth,m.value=e.clientHeight,r.value=e.scrollLeft,a.value=e.scrollTop,$=new ResizeObserver(t=>{for(let n of t)n.target===e&&(p.value=e.clientWidth,m.value=e.clientHeight,q())}),$.observe(e),()=>{t.removeEventListener(`scroll`,Z),$?.disconnect()}},ce;return t()&&(e(()=>{d.value=!0,f(()=>n.value.container,e=>{ce?.(),ce=se(e||null)},{immediate:!0}),q(),n.value.ssrRange||n.value.initialScrollIndex!==void 0?u(()=>{q();let e=n.value.initialScrollIndex===void 0?n.value.ssrRange?.start:n.value.initialScrollIndex,t=n.value.initialScrollAlign||`start`;e!=null&&W(e,n.value.ssrRange?.colStart,{align:t,behavior:`auto`}),s.value=!0,l.value=!0,u(()=>{l.value=!1})}):s.value=!0}),c(()=>{ce?.()})),{renderedItems:X,totalWidth:z,totalHeight:B,scrollDetails:re,scrollToIndex:W,scrollToOffset:G,stopProgrammaticScroll:ie,updateItemSize:oe,updateItemSizes:ae,updateHostOffset:q,columnRange:ne,getColumnWidth:U,refresh:()=>{b.resize(0),x.resize(0),S.resize(0),w.fill(0),T.fill(0),E.fill(0),K()},isHydrated:s}}var F={key:0,class:`virtual-scroll-debug-info`},I=p({__name:`VirtualScroll`,props:{items:{},itemSize:{},direction:{default:`vertical`},bufferBefore:{default:5},bufferAfter:{default:5},container:{},ssrRange:{},columnCount:{default:0},columnWidth:{},containerTag:{default:`div`},wrapperTag:{default:`div`},itemTag:{default:`div`},scrollPaddingStart:{default:0},scrollPaddingEnd:{default:0},stickyHeader:{type:Boolean,default:!1},stickyFooter:{type:Boolean,default:!1},gap:{default:0},columnGap:{default:0},stickyIndices:{default:()=>[]},loadDistance:{default:200},loading:{type:Boolean,default:!1},restoreScrollOnPrepend:{type:Boolean,default:!1},initialScrollIndex:{},initialScrollAlign:{},defaultItemSize:{},defaultColumnWidth:{},debug:{type:Boolean,default:!1}},emits:[`scroll`,`load`,`visibleRangeChange`],setup(t,{expose:p,emit:h}){let x=t,E=h,D=i(null),ee=i(null),O=i(null),te=i(null),j=new Map,M=s(),N=i(!!M.header),I=i(!!M.footer),L=i(!!M.loading);function R(){N.value=!!M.header,I.value=!!M.footer,L.value=!!M.loading}S(R);let z=i(0),B=i(0),V=y(()=>{let e=x.container===void 0?D.value:x.container;return e===D.value||typeof window<`u`&&(e===window||e===null)}),{isHydrated:H,columnRange:U,renderedItems:W,scrollDetails:G,totalHeight:K,totalWidth:q,getColumnWidth:J,scrollToIndex:Y,scrollToOffset:X,updateHostOffset:ne,updateItemSizes:re,refresh:ie,stopProgrammaticScroll:Z}=P(y(()=>{let e=x.scrollPaddingStart,t=x.scrollPaddingEnd,n=typeof e==`object`?e.x||0:x.direction===`horizontal`&&e||0,r=typeof e==`object`?e.y||0:x.direction===`horizontal`?0:e||0,i=typeof t==`object`?t.x||0:x.direction===`horizontal`&&t||0,a=typeof t==`object`?t.y||0:x.direction===`horizontal`?0:t||0;return{items:x.items,itemSize:x.itemSize,direction:x.direction,bufferBefore:x.bufferBefore,bufferAfter:x.bufferAfter,container:x.container===void 0?D.value:x.container,hostElement:ee.value,ssrRange:x.ssrRange,columnCount:x.columnCount,columnWidth:x.columnWidth,scrollPaddingStart:{x:n,y:r+(x.stickyHeader&&V.value?z.value:0)},scrollPaddingEnd:{x:i,y:a+(x.stickyFooter&&V.value?B.value:0)},gap:x.gap,columnGap:x.columnGap,stickyIndices:x.stickyIndices,loadDistance:x.loadDistance,loading:x.loading,restoreScrollOnPrepend:x.restoreScrollOnPrepend,initialScrollIndex:x.initialScrollIndex,initialScrollAlign:x.initialScrollAlign,defaultItemSize:x.defaultItemSize,defaultColumnWidth:x.defaultColumnWidth,debug:x.debug}}));function ae(){ie(),u(()=>{let e=[];for(let[t,n]of j.entries())n&&e.push({index:t,inlineSize:n.offsetWidth,blockSize:n.offsetHeight,element:n});e.length>0&&re(e)})}f(G,(e,t)=>{H.value&&(E(`scroll`,e),(!t||e.range.start!==t.range.start||e.range.end!==t.range.end||e.columnRange.start!==t.columnRange.start||e.columnRange.end!==t.columnRange.end)&&E(`visibleRangeChange`,{start:e.range.start,end:e.range.end,colStart:e.columnRange.start,colEnd:e.columnRange.end}),!x.loading&&(x.direction!==`horizontal`&&e.totalSize.height-(e.scrollOffset.y+e.viewportSize.height)<=x.loadDistance&&E(`load`,`vertical`),x.direction!==`vertical`&&e.totalSize.width-(e.scrollOffset.x+e.viewportSize.width)<=x.loadDistance&&E(`load`,`horizontal`)))}),f(H,e=>{e&&E(`visibleRangeChange`,{start:G.value.range.start,end:G.value.range.end,colStart:G.value.columnRange.start,colEnd:G.value.columnRange.end})},{once:!0});let oe=typeof window>`u`?null:new ResizeObserver(ne),Q=typeof window>`u`?null:new ResizeObserver(e=>{let t=[];for(let n of e){let e=n.target,r=Number(e.dataset.index);if(e.dataset.colIndex!==void 0)t.push({index:-1,inlineSize:0,blockSize:0,element:e});else if(!Number.isNaN(r)){let i=n.contentRect.width,a=n.contentRect.height;n.borderBoxSize&&n.borderBoxSize.length>0?(i=n.borderBoxSize[0].inlineSize,a=n.borderBoxSize[0].blockSize):(i=e.offsetWidth,a=e.offsetHeight),t.push({index:r,inlineSize:i,blockSize:a,element:e})}}t.length>0&&re(t)}),$=typeof window>`u`?null:new ResizeObserver(()=>{z.value=O.value?.offsetHeight||0,B.value=te.value?.offsetHeight||0,ne()});f(O,(e,t)=>{t&&$?.unobserve(t),e&&$?.observe(e)},{immediate:!0}),f(te,(e,t)=>{t&&$?.unobserve(t),e&&$?.observe(e)},{immediate:!0});let se=y(()=>W.value[0]?.index);f(se,(e,t)=>{if(x.direction===`both`){if(t!==void 0){let e=j.get(t);e&&e.querySelectorAll(`[data-col-index]`).forEach(e=>Q?.unobserve(e))}if(e!==void 0){let t=j.get(e);t&&t.querySelectorAll(`[data-col-index]`).forEach(e=>Q?.observe(e))}}},{flush:`post`}),e(()=>{D.value&&oe?.observe(D.value);for(let e of j.values())Q?.observe(e);if(se.value!==void 0){let e=j.get(se.value);e&&e.querySelectorAll(`[data-col-index]`).forEach(e=>Q?.observe(e))}}),f([D,ee],([e],[t])=>{t&&oe?.unobserve(t),e&&oe?.observe(e)});function ce(e,t){if(e)j.set(t,e),Q?.observe(e);else{let e=j.get(t);e&&(Q?.unobserve(e),j.delete(t))}}function le(e){Z();let{viewportSize:t,scrollOffset:n}=G.value,r=x.direction!==`vertical`,i=x.direction!==`horizontal`;if(e.key===`Home`){e.preventDefault(),Y(0,0,`start`);return}if(e.key===`End`){e.preventDefault();let t=x.items.length-1,n=(x.columnCount||0)>0?x.columnCount-1:0;r?i?Y(t,n,`end`):Y(0,t,`end`):Y(t,0,`end`);return}if(e.key===`ArrowUp`){e.preventDefault(),X(null,n.y-40);return}if(e.key===`ArrowDown`){e.preventDefault(),X(null,n.y+40);return}if(e.key===`ArrowLeft`){e.preventDefault(),X(n.x-40,null);return}if(e.key===`ArrowRight`){e.preventDefault(),X(n.x+40,null);return}if(e.key===`PageUp`){e.preventDefault(),X(!i&&r?n.x-t.width:null,i?n.y-t.height:null);return}e.key===`PageDown`&&(e.preventDefault(),X(!i&&r?n.x+t.width:null,i?n.y+t.height:null))}c(()=>{oe?.disconnect(),Q?.disconnect(),$?.disconnect()});let ue=y(()=>{let e=x.container;return e===null||typeof window<`u`&&e===window?!0:e&&typeof e==`object`&&`tagName`in e?e.tagName===`BODY`:!1}),de=y(()=>ue.value?{...x.direction===`vertical`?{}:{whiteSpace:`nowrap`}}:x.containerTag===`table`?{minInlineSize:x.direction===`vertical`?`100%`:`auto`}:{...x.direction===`vertical`?{}:{whiteSpace:`nowrap`}}),fe=y(()=>({inlineSize:x.direction===`vertical`?`100%`:`${q.value}px`,blockSize:x.direction===`horizontal`?`100%`:`${K.value}px`})),pe=y(()=>{let e=x.direction===`horizontal`;return{display:e?`inline-block`:`block`,...e?{blockSize:`100%`,verticalAlign:`top`}:{inlineSize:`100%`}}}),me=y(()=>({inlineSize:x.direction===`vertical`?`1px`:`${q.value}px`,blockSize:x.direction===`horizontal`?`1px`:`${K.value}px`}));function he(e){let t=x.direction===`vertical`,n=x.direction===`horizontal`,r=x.direction===`both`,i=x.itemSize===void 0||x.itemSize===null||x.itemSize===0,a={blockSize:n?`100%`:i?`auto`:`${e.size.height}px`};return t&&x.containerTag===`table`?a.minInlineSize=`100%`:a.inlineSize=t?`100%`:i?`auto`:`${e.size.width}px`,i&&(t||(a.minInlineSize=`1px`),n||(a.minBlockSize=`1px`)),H.value&&(e.isStickyActive?((t||r)&&(a.insetBlockStart=`${A(x.scrollPaddingStart,x.direction)}px`),(n||r)&&(a.insetInlineStart=`${k(x.scrollPaddingStart,x.direction)}px`),a.transform=`translate(${e.stickyOffset.x}px, ${e.stickyOffset.y}px)`):a.transform=`translate(${e.offset.x}px, ${e.offset.y}px)`),a}let ge=y(()=>x.debug),_e=y(()=>x.containerTag===`table`),ve=y(()=>_e.value?`thead`:`div`),ye=y(()=>_e.value?`tfoot`:`div`);return p({scrollDetails:G,columnRange:U,getColumnWidth:J,scrollToIndex:Y,scrollToOffset:X,refresh:ae,stopProgrammaticScroll:Z}),(e,i)=>(l(),C(a(t.containerTag),{ref_key:`hostRef`,ref:D,class:g([`virtual-scroll-container`,[`virtual-scroll--${t.direction}`,{"virtual-scroll--hydrated":m(H),"virtual-scroll--window":ue.value,"virtual-scroll--table":_e.value}]]),style:r(de.value),tabindex:`0`,onKeydown:le,onWheelPassive:m(Z),onPointerdownPassive:m(Z),onTouchstartPassive:m(Z)},{default:T(()=>[w(` v8 ignore start `),N.value?(l(),C(a(ve.value),{key:0,ref_key:`headerRef`,ref:O,class:g([`virtual-scroll-header`,{"virtual-scroll--sticky":t.stickyHeader}])},{default:T(()=>[n(e.$slots,`header`,{},void 0,!0)]),_:3},8,[`class`])):w(`v-if`,!0),w(` v8 ignore stop `),(l(),C(a(t.wrapperTag),{ref_key:`wrapperRef`,ref:ee,class:`virtual-scroll-wrapper`,style:r(fe.value)},{default:T(()=>[w(` Phantom element to push scroll height `),w(` v8 ignore start `),_e.value?(l(),C(a(t.itemTag),{key:0,class:`virtual-scroll-spacer`,style:r(me.value)},{default:T(()=>[...i[0]||=[_(`td`,{style:{padding:`0`,border:`none`,"block-size":`inherit`}},null,-1)]]),_:1},8,[`style`])):w(`v-if`,!0),w(` v8 ignore stop `),(l(!0),v(b,null,d(m(W),i=>(l(),C(a(t.itemTag),{key:i.index,ref_for:!0,ref:e=>ce(e,i.index),"data-index":i.index,class:g([`virtual-scroll-item`,{"virtual-scroll--sticky":i.isStickyActive,"virtual-scroll--debug":ge.value}]),style:r(he(i))},{default:T(()=>[n(e.$slots,`item`,{item:i.item,index:i.index,columnRange:m(U),getColumnWidth:m(J),isSticky:i.isSticky,isStickyActive:i.isStickyActive},void 0,!0),ge.value?(l(),v(`div`,F,` #`+o(i.index)+` (`+o(Math.round(i.offset.x))+`, `+o(Math.round(i.offset.y))+`) `,1)):w(`v-if`,!0)]),_:2},1032,[`data-index`,`class`,`style`]))),128))]),_:3},8,[`style`])),w(` v8 ignore start `),t.loading&&L.value?(l(),v(`div`,{key:1,class:`virtual-scroll-loading`,style:r(pe.value)},[n(e.$slots,`loading`,{},void 0,!0)],4)):w(`v-if`,!0),I.value?(l(),C(a(ye.value),{key:2,ref_key:`footerRef`,ref:te,class:g([`virtual-scroll-footer`,{"virtual-scroll--sticky":t.stickyFooter}])},{default:T(()=>[n(e.$slots,`footer`,{},void 0,!0)]),_:3},8,[`class`])):w(`v-if`,!0),w(` v8 ignore stop `)]),_:3},40,[`class`,`style`,`onWheelPassive`,`onPointerdownPassive`,`onTouchstartPassive`]))}}),L=(e,t)=>{let n=e.__vccOpts||e;for(let[e,r]of t)n[e]=r;return n},R=L(I,[[`__scopeId`,`data-v-8bd255e9`]]),z=[`innerHTML`],B=L(p({__name:`CodeBlock`,props:{code:{default:``},lang:{default:`vue`},lineNumbers:{type:Boolean,default:!1}},setup(t){let n=t,r=i(``),a=null;async function o(){if(a)return a;let{getHighlighter:e}=await E(async()=>{let{getHighlighter:e}=await import(`./chunk-Cp-ATCer.js`);return{getHighlighter:e}},__vite__mapDeps([0,1])),{createCssVariablesTheme:t}=await E(async()=>{let{createCssVariablesTheme:e}=await import(`./chunk-CNIrt8cf.js`);return{createCssVariablesTheme:e}},[]);return a=await e({themes:[t({name:`css-variables`,variablePrefix:`--shiki-`,variableDefaults:{}})],langs:[`vue`,`bash`,`ts`,`js`,`python`,`cpp`]}),a}function s(e){if(!e)return``;let t=e.split(`
`);for(;t.length>0&&t[0].trim()===``;)t.shift();for(;t.length>0&&t[t.length-1].trim()===``;)t.pop();if(t.length===0)return``;let n=t.reduce((e,t)=>{if(t.trim()===``)return e;let n=t.match(/^\\s*/)?.[0].length??0;return Math.min(e,n)},1/0);return t.map(e=>e.slice(n===1/0?0:n)).join(`
`)}function c(e){return e.replace(/&/g,`&amp;`).replace(/</g,`&lt;`).replace(/>/g,`&gt;`).replace(/"/g,`&quot;`).replace(/'/g,`&#039;`)}let u=y(()=>r.value?r.value:`<pre class="shiki px-6 py-3"><code>${c(s(n.code))}</code></pre>`);async function d(){let e=s(n.code);if(!e){r.value=``;return}try{r.value=(await o()).codeToHtml(e,{lang:n.lang,theme:`css-variables`})}catch(t){console.error(`Shikiji highlighting failed:`,t),r.value=`<pre class="shiki px-6 py-3"><code>${c(e)}</code></pre>`}}return x(d),e(()=>{r.value||d()}),f(()=>n.code,d),(e,n)=>(l(),v(`div`,{class:g([`code-block text-sm overflow-auto`,{"has-line-numbers":t.lineNumbers,"is-bash":t.lang===`bash`}]),"data-theme":`dark`},[_(`div`,{class:`shiki-container`,innerHTML:u.value},null,8,z)],2))}}),[[`__scopeId`,`data-v-866f94f3`]]);export{j as a,M as i,R as n,N as r,B as t};