const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/chunks/chunk-Cp-ATCer.js","assets/chunks/chunk-CtNc6juC.js"])))=>i.map(i=>d[i]);
import{A as e,B as t,E as n,F as r,G as i,H as a,I as o,L as s,M as c,N as l,O as u,P as d,R as f,T as p,U as m,V as h,W as g,_,b as v,g as y,h as b,j as x,k as S,v as C,y as w}from"./chunk-aspRjZ9M.js";import{t as T}from"./chunk-CtNc6juC.js";var E=class{tree;values;constructor(e){this.tree=new Float64Array(e+1),this.values=new Float64Array(e)}update(e,t){if(!(e<0||e>=this.values.length))for(this.values[e]=this.values[e]+t,e++;e<this.tree.length;)this.tree[e]=this.tree[e]+t,e+=e&-e}query(e){let t=0;for(;e>0;)t+=this.tree[e]||0,e-=e&-e;return t}set(e,t){e<0||e>=this.values.length||(this.values[e]=t)}get length(){return this.values.length}get(e){return this.values[e]||0}getValues(){return this.values}findLowerBound(e){let t=0,n=this.tree.length,r=1<<Math.floor(Math.log2(n-1));for(;r>0;){let i=t+r;if(i<n){let n=this.tree[i]||0;n<=e&&(t=i,e-=n)}r>>=1}return t}rebuild(){this.tree.fill(0);for(let e=0;e<this.values.length;e++)this.tree[e+1]=this.values[e]||0;for(let e=1;e<this.tree.length;e++){let t=e+(e&-e);t<this.tree.length&&(this.tree[t]=this.tree[t]+this.tree[e])}}resize(e){if(e===this.values.length)return;let t=new Float64Array(e);t.set(this.values.subarray(0,Math.min(e,this.values.length))),this.values=t,this.tree=new Float64Array(e+1),this.rebuild()}shift(e){if(e===0)return;let t=this.values.length,n=new Float64Array(t);e>0?n.set(this.values.subarray(0,Math.min(t-e,this.values.length)),e):n.set(this.values.subarray(-e)),this.values=n,this.rebuild()}};function D(e){return!!e&&`getBoundingClientRect`in e}function O(e){return!!e&&`scrollLeft`in e}function ee(e){return typeof e==`object`&&!!e&&(`align`in e||`behavior`in e||`isCorrection`in e)}function k(e,t){return typeof e==`object`&&e?e.x||0:t===`horizontal`&&e||0}function A(e,t){return typeof e==`object`&&e?e.y||0:(t===`vertical`||t===`both`)&&e||0}const j=40,M=100,N=5;function P(e){let r=h(0),i=h(0),a=h(!1),o=h(!1),c=h(!1),l=h(!1),d=h(0),f=h(0),p=t({x:0,y:0}),m,g=h(!1),_=new E(e.value.items.length),v=new E(e.value.items.length),b=new E(e.value.columnCount||0),C=h(0),w=new Uint8Array,T=new Uint8Array,j=new Uint8Array,M=h(null),N=h(!1),P=[],F=y(()=>e.value.itemSize===void 0||e.value.itemSize===null||e.value.itemSize===0),I=y(()=>e.value.columnWidth===void 0||e.value.columnWidth===null||e.value.columnWidth===0),L=y(()=>typeof e.value.itemSize==`number`&&e.value.itemSize>0?e.value.itemSize:null),R=y(()=>e.value.defaultItemSize||L.value||40),z=y(()=>[...e.value.stickyIndices||[]].sort((e,t)=>e-t)),B=y(()=>{if(C.value,!o.value&&e.value.ssrRange&&!l.value){let{start:t=0,end:n=0,colStart:r=0,colEnd:i=0}=e.value.ssrRange,a=e.value.columnCount||0;if(e.value.direction===`both`){if(a<=0)return 0;let t=i||a,n=b.query(t)-b.query(r);return Math.max(0,n-(t>r&&e.value.columnGap||0))}if(e.value.direction===`horizontal`){if(L.value!==null){let r=n-t;return Math.max(0,r*(L.value+(e.value.columnGap||0))-(r>0&&e.value.columnGap||0))}let r=_.query(n)-_.query(t);return Math.max(0,r-(n>t&&e.value.columnGap||0))}}if(e.value.direction===`both`){let t=e.value.columnCount||0;if(t<=0)return 0;let n=b.query(t);return Math.max(0,n-(e.value.columnGap||0))}if(e.value.direction===`vertical`)return 0;if(L.value!==null){let t=e.value.items.length;return Math.max(0,t*(L.value+(e.value.columnGap||0))-(t>0&&e.value.columnGap||0))}let t=_.query(e.value.items.length);return Math.max(0,t-(e.value.items.length>0&&e.value.columnGap||0))}),V=y(()=>{if(C.value,!o.value&&e.value.ssrRange&&!l.value){let{start:t,end:n}=e.value.ssrRange;if(e.value.direction===`vertical`||e.value.direction===`both`){if(L.value!==null){let r=n-t;return Math.max(0,r*(L.value+(e.value.gap||0))-(r>0&&e.value.gap||0))}let r=v.query(n)-v.query(t);return Math.max(0,r-(n>t&&e.value.gap||0))}}if(e.value.direction===`horizontal`)return 0;if(L.value!==null){let t=e.value.items.length;return Math.max(0,t*(L.value+(e.value.gap||0))-(t>0&&e.value.gap||0))}let t=v.query(e.value.items.length);return Math.max(0,t-(e.value.items.length>0&&e.value.gap||0))}),H=y(()=>{let t=e.value.direction===`horizontal`||e.value.direction===`both`?k(e.value.scrollPaddingStart,e.value.direction):0;return Math.max(0,r.value+t-p.x)}),U=y(()=>{let t=e.value.direction===`vertical`||e.value.direction===`both`?A(e.value.scrollPaddingStart,e.value.direction):0;return Math.max(0,i.value+t-p.y)}),W=t=>{C.value;let n=e.value.columnWidth;if(typeof n==`number`&&n>0)return n;if(Array.isArray(n)&&n.length>0){let r=n[t%n.length];return r!=null&&r>0?r:e.value.defaultColumnWidth||100}return typeof n==`function`?n(t):b.get(t)||e.value.defaultColumnWidth||100},G=(t,n,o)=>{let s=typeof o==`object`&&o&&`isCorrection`in o?o.isCorrection:!1;s||(M.value={rowIndex:t,colIndex:n,options:o});let c=e.value.container||window,l=L.value,u=e.value.gap||0,m=e.value.columnGap||0,h,y;ee(o)?(h=o.align,y=o.behavior):h=o;let x=(typeof h==`object`?h.x:h)||`auto`,S=(typeof h==`object`?h.y:h)||`auto`,C=k(e.value.scrollPaddingStart,e.value.direction),w=k(e.value.scrollPaddingEnd,e.value.direction),T=A(e.value.scrollPaddingStart,e.value.direction),E=A(e.value.scrollPaddingEnd,e.value.direction),j=e.value.direction===`vertical`||e.value.direction===`both`,N=e.value.direction===`horizontal`||e.value.direction===`both`,P=d.value-(N?C+w:0),F=f.value-(j?T+E:0),I=H.value,R=U.value,z=0,W=0;if(t!=null&&(t>=e.value.items.length?(R=V.value,W=0):(R=l===null?v.query(t):t*(l+u),W=l===null?v.get(t)-u:l),S===`start`||(S===`center`?R-=(F-W)/2:S===`end`?R-=F-W:R>=U.value&&R+W<=U.value+F||R<U.value||(R-=F-W))),n!=null){let t=e.value.columnCount||0;n>=t&&t>0?(I=B.value,z=0):e.value.direction===`horizontal`?(I=l===null?_.query(n):n*(l+m),z=l===null?_.get(n)-m:l):(I=b.query(n),z=b.get(n)-m),x===`start`||(x===`center`?I-=(P-z)/2:x===`end`?I-=P-z:I>=H.value&&I+z<=H.value+P||I<H.value||(I-=P-z))}I=Math.max(0,Math.min(I,Math.max(0,B.value-P))),R=Math.max(0,Math.min(R,Math.max(0,V.value-F)));let G=I+p.x-(N?C:0),K=R+p.y-(j?T:0),q=n==null||Math.abs(H.value-I)<1,J=t==null||Math.abs(U.value-R)<1;if(!q||!J){let e=0,r=0,i=0,a=0,o=0,s=0;if(typeof window<`u`){if(c===window?(e=window.scrollX,r=window.scrollY,i=document.documentElement.scrollWidth,a=document.documentElement.scrollHeight,o=window.innerWidth,s=window.innerHeight):D(c)&&(e=c.scrollLeft,r=c.scrollTop,i=c.scrollWidth,a=c.scrollHeight,o=c.clientWidth,s=c.clientHeight),!q&&n!=null){let t=e<=1&&G<=1,n=e>=i-o-1&&G>=i-o-1;(t||n)&&(q=!0)}if(!J&&t!=null){let e=r<=1&&K<=1,t=r>=a-s-1&&K>=a-s-1;(e||t)&&(J=!0)}}}let Y=s?`auto`:y||`smooth`;if(g.value=!0,typeof window<`u`&&c===window)window.scrollTo({left:n==null?void 0:Math.max(0,G),top:t==null?void 0:Math.max(0,K),behavior:Y});else if(O(c)){let e={behavior:Y};n!=null&&(e.left=Math.max(0,G)),t!=null&&(e.top=Math.max(0,K)),typeof c.scrollTo==`function`?c.scrollTo(e):(e.left!==void 0&&(c.scrollLeft=e.left),e.top!==void 0&&(c.scrollTop=e.top))}(Y===`auto`||Y===void 0)&&(n!=null&&(r.value=Math.max(0,G)),t!=null&&(i.value=Math.max(0,K))),q&&J&&!a.value&&(M.value=null)},K=(t,n,a)=>{let o=e.value.container||window;g.value=!0;let s=e.value.direction===`vertical`||e.value.direction===`both`,c=e.value.direction===`horizontal`||e.value.direction===`both`,l=k(e.value.scrollPaddingStart,e.value.direction),u=A(e.value.scrollPaddingStart,e.value.direction),m=k(e.value.scrollPaddingEnd,e.value.direction),h=A(e.value.scrollPaddingEnd,e.value.direction),_=d.value-(c?l+m:0),v=f.value-(s?u+h:0),y=t==null?null:c?Math.max(0,Math.min(t,Math.max(0,B.value-_))):Math.max(0,t),b=n==null?null:s?Math.max(0,Math.min(n,Math.max(0,V.value-v))):Math.max(0,n),x=typeof window<`u`&&o===window?window.scrollX:o.scrollLeft,S=typeof window<`u`&&o===window?window.scrollY:o.scrollTop,C=y===null?x:y+p.x-(c?l:0),w=b===null?S:b+p.y-(s?u:0);if(typeof window<`u`&&o===window)window.scrollTo({left:t==null?void 0:C,top:n==null?void 0:w,behavior:a?.behavior||`auto`});else if(O(o)){let e={behavior:a?.behavior||`auto`};t!=null&&(e.left=C),n!=null&&(e.top=w),typeof o.scrollTo==`function`?o.scrollTo(e):(e.left!==void 0&&(o.scrollLeft=e.left),e.top!==void 0&&(o.scrollTop=e.top))}(a?.behavior===`auto`||a?.behavior===void 0)&&(t!=null&&(r.value=C),n!=null&&(i.value=w))},q=()=>{let t=e.value.items,n=t.length,r=e.value.columnCount||0;if(_.resize(n),v.resize(n),b.resize(r),T.length!==n){let e=new Uint8Array(n);e.set(T.subarray(0,Math.min(n,T.length))),T=e}if(j.length!==n){let e=new Uint8Array(n);e.set(j.subarray(0,Math.min(n,j.length))),j=e}if(w.length!==r){let e=new Uint8Array(r);e.set(w.subarray(0,Math.min(r,w.length))),w=e}let i=0;if(e.value.restoreScrollOnPrepend&&P.length>0&&n>P.length){let e=P[0];if(e!==void 0){for(let r=1;r<=n-P.length;r++)if(t[r]===e){i=r;break}}}if(i>0){_.shift(i),v.shift(i),M.value&&M.value.rowIndex!==null&&M.value.rowIndex!==void 0&&(M.value.rowIndex+=i);let r=new Uint8Array(n),a=new Uint8Array(n);r.set(T.subarray(0,Math.min(n-i,T.length)),i),a.set(j.subarray(0,Math.min(n-i,j.length)),i),T=r,j=a;let o=e.value.gap||0,s=e.value.columnGap||0,c=0,l=0;for(let n=0;n<i;n++){let r=typeof e.value.itemSize==`function`?e.value.itemSize(t[n],n):R.value;e.value.direction===`horizontal`?c+=r+s:l+=r+o}(c>0||l>0)&&u(()=>{K(c>0?H.value+c:null,l>0?U.value+l:null,{behavior:`auto`})})}if(r>0){let t=e.value.columnGap||0,n=!1;for(let e=0;e<r;e++){let r=W(e),i=b.get(e),a=w[e]===1;if(!I.value||!a||i===0){let a=r+t;Math.abs(i-a)>.5?(b.set(e,a),w[e]=I.value?0:1,n=!0):I.value||(w[e]=1)}}n&&b.rebuild()}let a=e.value.gap||0,o=e.value.columnGap||0,s=!1;for(let t=0;t<n;t++){let n=e.value.items[t],r=_.get(t),i=v.get(t),c=typeof e.value.itemSize==`function`?e.value.itemSize(n,t):R.value,l=e.value.direction===`vertical`,u=e.value.direction===`horizontal`,d=e.value.direction===`both`,f=u?c+o:0,p=l||d?c+a:0,m=T[t]===1,h=j[t]===1;u?(!F.value||!m||r===0)&&(Math.abs(r-f)>.5?(_.set(t,f),T[t]=F.value?0:1,s=!0):F.value||(T[t]=1)):r!==0&&(_.set(t,0),T[t]=0,s=!0),l||d?(!F.value||!h||i===0)&&(Math.abs(i-p)>.5?(v.set(t,p),j[t]=F.value?0:1,s=!0):F.value||(j[t]=1)):i!==0&&(v.set(t,0),j[t]=0,s=!0)}s&&(_.rebuild(),v.rebuild()),P=[...t],N.value=!0,C.value++},J=()=>{if(e.value.hostElement&&typeof window<`u`){let t=e.value.hostElement.getBoundingClientRect(),n=e.value.container||window,r=0,i=0;if(n===window)r=t.left+window.scrollX,i=t.top+window.scrollY;else if(n===e.value.hostElement)r=0,i=0;else if(D(n)){let e=n.getBoundingClientRect();r=t.left-e.left+n.scrollLeft,i=t.top-e.top+n.scrollTop}(Math.abs(p.x-r)>.1||Math.abs(p.y-i)>.1)&&(p.x=r,p.y=i)}};s([()=>e.value.items,()=>e.value.direction,()=>e.value.columnCount,()=>e.value.columnWidth,()=>e.value.itemSize,()=>e.value.gap,()=>e.value.columnGap,()=>e.value.defaultItemSize,()=>e.value.defaultColumnWidth],q,{immediate:!0}),s(()=>[e.value.container,e.value.hostElement],()=>{J()});let Y=y(()=>{if(C.value,(!o.value||c.value)&&e.value.ssrRange)return{start:e.value.ssrRange.start,end:e.value.ssrRange.end};let t=e.value.direction||`vertical`,n=e.value.ssrRange&&!a.value?0:e.value.bufferBefore??5,r=e.value.bufferAfter??5,i=e.value.gap||0,s=e.value.columnGap||0,l=L.value,u=k(e.value.scrollPaddingStart,t),p=k(e.value.scrollPaddingEnd,t),m=A(e.value.scrollPaddingStart,t),h=A(e.value.scrollPaddingEnd,t),g=t===`vertical`||t===`both`,y=t===`horizontal`||t===`both`,b=d.value-(y?u+p:0),x=f.value-(g?m+h:0),S=0,w=e.value.items.length;if(g)if(l!==null)S=Math.floor(U.value/(l+i)),w=Math.ceil((U.value+x)/(l+i));else{S=v.findLowerBound(U.value);let t=v.query(S),n=S;for(;n<e.value.items.length&&t<U.value+x;)t=v.query(++n);w=n}else if(l!==null)S=Math.floor(H.value/(l+s)),w=Math.ceil((H.value+b)/(l+s));else{S=_.findLowerBound(H.value);let t=_.query(S),n=S;for(;n<e.value.items.length&&t<H.value+b;)t=_.query(++n);w=n}return{start:Math.max(0,S-n),end:Math.min(e.value.items.length,w+r)}}),X=y(()=>{C.value;let t=L.value,n=e.value.gap||0,r=e.value.columnGap||0;return e.value.direction===`horizontal`?t===null?_.findLowerBound(H.value):Math.floor(H.value/(t+r)):t===null?v.findLowerBound(U.value):Math.floor(U.value/(t+n))}),te=y(()=>{C.value;let{start:t,end:n}=Y.value,r=[],i=L.value,a=e.value.gap||0,s=e.value.columnGap||0,c=z.value,l=new Set;for(let e=t;e<n;e++)l.add(e);if(o.value||!e.value.ssrRange){let e=X.value,r,i=0,a=c.length-1;for(;i<=a;){let t=i+a>>>1;c[t]<e?(r=c[t],i=t+1):a=t-1}r!==void 0&&l.add(r);for(let e of c)e>=t&&e<n&&l.add(e)}let u=Array.from(l).sort((e,t)=>e-t),p=e.value.ssrRange?.start||0,m=e.value.ssrRange?.colStart||0,h=0,g=0;!o.value&&e.value.ssrRange&&(g=e.value.direction===`vertical`||e.value.direction===`both`?i===null?v.query(p):p*(i+a):0,e.value.direction===`horizontal`?h=i===null?_.query(m):m*(i+s):e.value.direction===`both`&&(h=b.query(m)));for(let t of u){let n=e.value.items[t];if(n===void 0)continue;let o=0,l=0,u=0,p=0;e.value.direction===`horizontal`?(o=i===null?_.query(t):t*(i+s),u=i===null?_.get(t)-s:i,p=f.value):(l=(e.value.direction===`vertical`||e.value.direction===`both`)&&i!==null?t*(i+a):v.query(t),p=i===null?v.get(t)-a:i,u=e.value.direction===`both`?B.value:d.value);let m=c.includes(t),y=o,b=l,x=!1,S={x:0,y:0};if(m){if(e.value.direction===`vertical`||e.value.direction===`both`){if(U.value>b){x=!0;let e,n=0,r=c.length-1;for(;n<=r;){let i=n+r>>>1;c[i]>t?(e=c[i],r=i-1):n=i+1}if(e!==void 0){let t=(i===null?v.query(e):e*(i+a))-U.value;t<p&&(S.y=-(p-t))}}}else if(e.value.direction===`horizontal`&&H.value>y){x=!0;let e,n=0,r=c.length-1;for(;n<=r;){let i=n+r>>>1;c[i]>t?(e=c[i],r=i-1):n=i+1}if(e!==void 0){let t=(i===null?_.query(e):e*(i+s))-H.value;t<u&&(S.x=-(u-t))}}}r.push({item:n,index:t,offset:{x:y-h,y:b-g},size:{width:u,height:p},originalX:y,originalY:b,isSticky:m,isStickyActive:x,stickyOffset:S})}return r}),Z=y(()=>{C.value;let t=e.value.columnCount||0;if(!t)return{start:0,end:0,padStart:0,padEnd:0};if((!o.value||c.value)&&e.value.ssrRange){let{colStart:n=0,colEnd:r=0}=e.value.ssrRange;return{start:Math.max(0,n),end:Math.min(t,r||t),padStart:0,padEnd:0}}let n=b.findLowerBound(H.value),r=b.query(n),i=n;for(;i<t&&r<H.value+d.value;)r=b.query(++i);let s=e.value.ssrRange&&!a.value?0:2,l=Math.max(0,n-s),u=Math.min(t,i+s);return{start:l,end:u,padStart:b.query(l),padEnd:b.query(t)-b.query(u)}}),Q=y(()=>{C.value;let t=L.value,n=e.value.columnGap||0,r=0;return(e.value.direction===`horizontal`||e.value.direction===`both`)&&(r=t===null?_.findLowerBound(H.value):Math.floor(H.value/(t+n))),{items:te.value,currentIndex:X.value,currentColIndex:r,scrollOffset:{x:H.value,y:U.value},viewportSize:{width:d.value,height:f.value},totalSize:{width:B.value,height:V.value},isScrolling:a.value,isProgrammaticScroll:g.value,range:Y.value,columnRange:Z.value}}),$=()=>{g.value=!1,M.value=null},ne=e=>{let t=e.target;typeof window>`u`||(t===window||t===document?(r.value=window.scrollX,i.value=window.scrollY):O(t)&&(r.value=t.scrollLeft,i.value=t.scrollTop),a.value||=(g.value||(M.value=null),!0),clearTimeout(m),m=setTimeout(()=>{a.value=!1,g.value=!1},250))},re=t=>{let n=!1,r=e.value.gap||0,i=e.value.columnGap||0;for(let{index:a,inlineSize:o,blockSize:s,element:c}of t){if((F.value||typeof e.value.itemSize==`function`)&&a>=0){if(e.value.direction===`horizontal`){let e=_.get(a),t=o+i;(!T[a]||Math.abs(t-e)>.5)&&(_.update(a,t-e),T[a]=1,n=!0)}if(e.value.direction===`vertical`||e.value.direction===`both`){let t=v.get(a),i=s+r;e.value.direction,(!j[a]||Math.abs(i-t)>.5)&&(v.update(a,i-t),j[a]=1,n=!0)}}let t=I.value||typeof e.value.columnWidth==`function`;if(e.value.direction===`both`&&c&&e.value.columnCount&&t){let t=c.dataset.colIndex===void 0?Array.from(c.querySelectorAll(`[data-col-index]`)):[c];for(let r of t){let t=Number.parseInt(r.dataset.colIndex,10);if(t>=0&&t<(e.value.columnCount||0)){let e=r.offsetWidth,a=b.get(t),o=e+i;Math.abs(a-o)>.5&&(b.update(t,o-a),w[t]=1,n=!0)}}}}n&&C.value++},ie=(e,t,n,r)=>{re([{index:e,inlineSize:t,blockSize:n,element:r}])},ae=()=>{if(M.value&&!c.value){let{rowIndex:e,colIndex:t,options:n}=M.value;G(e,t,ee(n)?{...n,isCorrection:!0}:{align:n,isCorrection:!0})}};s(C,ae),s(a,e=>{e||ae()});let oe=null,se=e=>{if(!e||typeof window>`u`)return;let t=e===window?document:e;if(t.addEventListener(`scroll`,ne,{passive:!0}),e===window){d.value=window.innerWidth,f.value=window.innerHeight,r.value=window.scrollX,i.value=window.scrollY;let e=()=>{d.value=window.innerWidth,f.value=window.innerHeight,J()};return window.addEventListener(`resize`,e),()=>{t.removeEventListener(`scroll`,ne),window.removeEventListener(`resize`,e)}}else return d.value=e.clientWidth,f.value=e.clientHeight,r.value=e.scrollLeft,i.value=e.scrollTop,oe=new ResizeObserver(t=>{for(let n of t)n.target===e&&(d.value=e.clientWidth,f.value=e.clientHeight,J())}),oe.observe(e),()=>{t.removeEventListener(`scroll`,ne),oe?.disconnect()}},ce;return n()&&(S(()=>{l.value=!0,s(()=>e.value.container,e=>{ce?.(),ce=se(e||null)},{immediate:!0}),J(),e.value.ssrRange||e.value.initialScrollIndex!==void 0?u(()=>{J();let t=e.value.initialScrollIndex===void 0?e.value.ssrRange?.start:e.value.initialScrollIndex,n=e.value.initialScrollAlign||`start`;t!=null&&G(t,e.value.ssrRange?.colStart,{align:n,behavior:`auto`}),o.value=!0,c.value=!0,u(()=>{c.value=!1})}):o.value=!0}),x(()=>{ce?.()})),{renderedItems:te,totalWidth:B,totalHeight:V,scrollDetails:Q,scrollToIndex:G,scrollToOffset:K,stopProgrammaticScroll:$,updateItemSize:ie,updateItemSizes:re,updateHostOffset:J,columnRange:Z,getColumnWidth:W,refresh:()=>{_.resize(0),v.resize(0),b.resize(0),w.fill(0),T.fill(0),j.fill(0),q()},isHydrated:o}}var F={key:0,class:`virtual-scroll-debug-info`},I=p({__name:`VirtualScroll`,props:{items:{},itemSize:{},direction:{default:`vertical`},bufferBefore:{default:5},bufferAfter:{default:5},container:{},ssrRange:{},columnCount:{default:0},columnWidth:{},containerTag:{default:`div`},wrapperTag:{default:`div`},itemTag:{default:`div`},scrollPaddingStart:{default:0},scrollPaddingEnd:{default:0},stickyHeader:{type:Boolean,default:!1},stickyFooter:{type:Boolean,default:!1},gap:{default:0},columnGap:{default:0},stickyIndices:{default:()=>[]},loadDistance:{default:200},loading:{type:Boolean,default:!1},restoreScrollOnPrepend:{type:Boolean,default:!1},initialScrollIndex:{},initialScrollAlign:{},defaultItemSize:{},defaultColumnWidth:{},debug:{type:Boolean,default:!1}},emits:[`scroll`,`load`,`visibleRangeChange`],setup(e,{expose:t,emit:n}){let p=e,T=n,E=o(),D=h(null),O=h(null),ee=h(null),j=h(null),M=new Map,N=h(0),I=h(0),L=y(()=>{let e=p.container===void 0?D.value:p.container;return e===D.value||typeof window<`u`&&(e===window||e===null)}),{isHydrated:R,columnRange:z,renderedItems:B,scrollDetails:V,totalHeight:H,totalWidth:U,getColumnWidth:W,scrollToIndex:G,scrollToOffset:K,updateHostOffset:q,updateItemSizes:J,refresh:Y,stopProgrammaticScroll:X}=P(y(()=>{let e=p.scrollPaddingStart,t=p.scrollPaddingEnd,n=typeof e==`object`?e.x||0:p.direction===`horizontal`&&e||0,r=typeof e==`object`?e.y||0:p.direction===`horizontal`?0:e||0,i=typeof t==`object`?t.x||0:p.direction===`horizontal`&&t||0,a=typeof t==`object`?t.y||0:p.direction===`horizontal`?0:t||0;return{items:p.items,itemSize:p.itemSize,direction:p.direction,bufferBefore:p.bufferBefore,bufferAfter:p.bufferAfter,container:p.container===void 0?D.value:p.container,hostElement:O.value,ssrRange:p.ssrRange,columnCount:p.columnCount,columnWidth:p.columnWidth,scrollPaddingStart:{x:n,y:r+(p.stickyHeader&&L.value?N.value:0)},scrollPaddingEnd:{x:i,y:a+(p.stickyFooter&&L.value?I.value:0)},gap:p.gap,columnGap:p.columnGap,stickyIndices:p.stickyIndices,loadDistance:p.loadDistance,loading:p.loading,restoreScrollOnPrepend:p.restoreScrollOnPrepend,initialScrollIndex:p.initialScrollIndex,initialScrollAlign:p.initialScrollAlign,defaultItemSize:p.defaultItemSize,defaultColumnWidth:p.defaultColumnWidth,debug:p.debug}}));function te(){Y(),u(()=>{let e=[];for(let[t,n]of M.entries())n&&e.push({index:t,inlineSize:n.offsetWidth,blockSize:n.offsetHeight,element:n});e.length>0&&J(e)})}s(V,(e,t)=>{R.value&&(T(`scroll`,e),(!t||e.range.start!==t.range.start||e.range.end!==t.range.end||e.columnRange.start!==t.columnRange.start||e.columnRange.end!==t.columnRange.end)&&T(`visibleRangeChange`,{start:e.range.start,end:e.range.end,colStart:e.columnRange.start,colEnd:e.columnRange.end}),!p.loading&&(p.direction!==`horizontal`&&e.totalSize.height-(e.scrollOffset.y+e.viewportSize.height)<=p.loadDistance&&T(`load`,`vertical`),p.direction!==`vertical`&&e.totalSize.width-(e.scrollOffset.x+e.viewportSize.width)<=p.loadDistance&&T(`load`,`horizontal`)))}),s(R,e=>{e&&T(`visibleRangeChange`,{start:V.value.range.start,end:V.value.range.end,colStart:V.value.columnRange.start,colEnd:V.value.columnRange.end})},{once:!0});let Z=typeof window>`u`?null:new ResizeObserver(q),Q=typeof window>`u`?null:new ResizeObserver(e=>{let t=[];for(let n of e){let e=n.target,r=Number(e.dataset.index);if(e.dataset.colIndex!==void 0)t.push({index:-1,inlineSize:0,blockSize:0,element:e});else if(!Number.isNaN(r)){let i=n.contentRect.width,a=n.contentRect.height;n.borderBoxSize&&n.borderBoxSize.length>0?(i=n.borderBoxSize[0].inlineSize,a=n.borderBoxSize[0].blockSize):(i=e.offsetWidth,a=e.offsetHeight),t.push({index:r,inlineSize:i,blockSize:a,element:e})}}t.length>0&&J(t)}),$=typeof window>`u`?null:new ResizeObserver(()=>{N.value=ee.value?.offsetHeight||0,I.value=j.value?.offsetHeight||0,q()});s(ee,(e,t)=>{t&&$?.unobserve(t),e&&$?.observe(e)},{immediate:!0}),s(j,(e,t)=>{t&&$?.unobserve(t),e&&$?.observe(e)},{immediate:!0});let ne=y(()=>B.value[0]?.index);s(ne,(e,t)=>{if(p.direction===`both`){if(t!==void 0){let e=M.get(t);e&&e.querySelectorAll(`[data-col-index]`).forEach(e=>Q?.unobserve(e))}if(e!==void 0){let t=M.get(e);t&&t.querySelectorAll(`[data-col-index]`).forEach(e=>Q?.observe(e))}}},{flush:`post`}),S(()=>{D.value&&Z?.observe(D.value);for(let e of M.values())Q?.observe(e);if(ne.value!==void 0){let e=M.get(ne.value);e&&e.querySelectorAll(`[data-col-index]`).forEach(e=>Q?.observe(e))}}),s([D,O],([e],[t])=>{t&&Z?.unobserve(t),e&&Z?.observe(e)});function re(e,t){if(e)M.set(t,e),Q?.observe(e);else{let e=M.get(t);e&&(Q?.unobserve(e),M.delete(t))}}function ie(e){X();let{viewportSize:t,scrollOffset:n}=V.value,r=p.direction!==`vertical`,i=p.direction!==`horizontal`;if(e.key===`Home`){e.preventDefault(),G(0,0,`start`);return}if(e.key===`End`){e.preventDefault();let t=p.items.length-1,n=(p.columnCount||0)>0?p.columnCount-1:0;r?i?G(t,n,`end`):G(0,t,`end`):G(t,0,`end`);return}if(e.key===`ArrowUp`){e.preventDefault(),K(null,n.y-40);return}if(e.key===`ArrowDown`){e.preventDefault(),K(null,n.y+40);return}if(e.key===`ArrowLeft`){e.preventDefault(),K(n.x-40,null);return}if(e.key===`ArrowRight`){e.preventDefault(),K(n.x+40,null);return}if(e.key===`PageUp`){e.preventDefault(),K(!i&&r?n.x-t.width:null,i?n.y-t.height:null);return}e.key===`PageDown`&&(e.preventDefault(),K(!i&&r?n.x+t.width:null,i?n.y+t.height:null))}x(()=>{Z?.disconnect(),Q?.disconnect(),$?.disconnect()});let ae=y(()=>{let e=p.container;return e===null||typeof window<`u`&&e===window?!0:e&&typeof e==`object`&&`tagName`in e?e.tagName===`BODY`:!1}),oe=y(()=>ae.value?{...p.direction===`vertical`?{}:{whiteSpace:`nowrap`}}:p.containerTag===`table`?{minInlineSize:p.direction===`vertical`?`100%`:`auto`}:{...p.direction===`vertical`?{}:{whiteSpace:`nowrap`}}),se=y(()=>({inlineSize:p.direction===`vertical`?`100%`:`${U.value}px`,blockSize:p.direction===`horizontal`?`100%`:`${H.value}px`})),ce=y(()=>{let e=p.direction===`horizontal`;return{display:e?`inline-block`:`block`,...e?{blockSize:`100%`,verticalAlign:`top`}:{inlineSize:`100%`}}}),le=y(()=>({inlineSize:p.direction===`vertical`?`1px`:`${U.value}px`,blockSize:p.direction===`horizontal`?`1px`:`${H.value}px`}));function ue(e){let t=p.direction===`vertical`,n=p.direction===`horizontal`,r=p.direction===`both`,i=p.itemSize===void 0||p.itemSize===null||p.itemSize===0,a={blockSize:n?`100%`:i?`auto`:`${e.size.height}px`};return t&&p.containerTag===`table`?a.minInlineSize=`100%`:a.inlineSize=t?`100%`:i?`auto`:`${e.size.width}px`,i&&(t||(a.minInlineSize=`1px`),n||(a.minBlockSize=`1px`)),R.value&&(e.isStickyActive?((t||r)&&(a.insetBlockStart=`${A(p.scrollPaddingStart,p.direction)}px`),(n||r)&&(a.insetInlineStart=`${k(p.scrollPaddingStart,p.direction)}px`),a.transform=`translate(${e.stickyOffset.x}px, ${e.stickyOffset.y}px)`):a.transform=`translate(${e.offset.x}px, ${e.offset.y}px)`),a}let de=y(()=>p.debug),fe=y(()=>p.containerTag===`table`),pe=y(()=>fe.value?`thead`:`div`),me=y(()=>fe.value?`tfoot`:`div`);return t({scrollDetails:V,columnRange:z,getColumnWidth:W,scrollToIndex:G,scrollToOffset:K,refresh:te,stopProgrammaticScroll:X}),(t,n)=>(c(),C(r(e.containerTag),{ref_key:`hostRef`,ref:D,class:m([`virtual-scroll-container`,[`virtual-scroll--${e.direction}`,{"virtual-scroll--hydrated":a(R),"virtual-scroll--window":ae.value,"virtual-scroll--table":fe.value}]]),style:g(oe.value),tabindex:`0`,onKeydown:ie,onWheelPassive:a(X),onPointerdownPassive:a(X),onTouchstartPassive:a(X)},{default:f(()=>[w(` v8 ignore start `),E.header?(c(),C(r(pe.value),{key:0,ref_key:`headerRef`,ref:ee,class:m([`virtual-scroll-header`,{"virtual-scroll--sticky":e.stickyHeader}])},{default:f(()=>[d(t.$slots,`header`,{},void 0,!0)]),_:3},8,[`class`])):w(`v-if`,!0),w(` v8 ignore stop `),(c(),C(r(e.wrapperTag),{ref_key:`wrapperRef`,ref:O,class:`virtual-scroll-wrapper`,style:g(se.value)},{default:f(()=>[w(` Phantom element to push scroll height `),w(` v8 ignore start `),fe.value?(c(),C(r(e.itemTag),{key:0,class:`virtual-scroll-spacer`,style:g(le.value)},{default:f(()=>[...n[0]||=[_(`td`,{style:{padding:`0`,border:`none`,"block-size":`inherit`}},null,-1)]]),_:1},8,[`style`])):w(`v-if`,!0),w(` v8 ignore stop `),(c(!0),v(b,null,l(a(B),n=>(c(),C(r(e.itemTag),{key:n.index,ref_for:!0,ref:e=>re(e,n.index),"data-index":n.index,class:m([`virtual-scroll-item`,{"virtual-scroll--sticky":n.isStickyActive,"virtual-scroll--debug":de.value}]),style:g(ue(n))},{default:f(()=>[d(t.$slots,`item`,{item:n.item,index:n.index,columnRange:a(z),getColumnWidth:a(W),isSticky:n.isSticky,isStickyActive:n.isStickyActive},void 0,!0),de.value?(c(),v(`div`,F,` #`+i(n.index)+` (`+i(Math.round(n.offset.x))+`, `+i(Math.round(n.offset.y))+`) `,1)):w(`v-if`,!0)]),_:2},1032,[`data-index`,`class`,`style`]))),128))]),_:3},8,[`style`])),w(` v8 ignore start `),e.loading&&E.loading?(c(),v(`div`,{key:1,class:`virtual-scroll-loading`,style:g(ce.value)},[d(t.$slots,`loading`,{},void 0,!0)],4)):w(`v-if`,!0),E.footer?(c(),C(r(me.value),{key:2,ref_key:`footerRef`,ref:j,class:m([`virtual-scroll-footer`,{"virtual-scroll--sticky":e.stickyFooter}])},{default:f(()=>[d(t.$slots,`footer`,{},void 0,!0)]),_:3},8,[`class`])):w(`v-if`,!0),w(` v8 ignore stop `)]),_:3},40,[`class`,`style`,`onWheelPassive`,`onPointerdownPassive`,`onTouchstartPassive`]))}}),L=(e,t)=>{let n=e.__vccOpts||e;for(let[e,r]of t)n[e]=r;return n},R=L(I,[[`__scopeId`,`data-v-e23384d1`]]),z=[`innerHTML`],B=L(p({__name:`CodeBlock`,props:{code:{default:``},lang:{default:`vue`},lineNumbers:{type:Boolean,default:!1}},setup(t){let n=t,r=h(``),i=null;async function a(){if(i)return i;let{getHighlighter:e}=await T(async()=>{let{getHighlighter:e}=await import(`./chunk-Cp-ATCer.js`);return{getHighlighter:e}},__vite__mapDeps([0,1])),{createCssVariablesTheme:t}=await T(async()=>{let{createCssVariablesTheme:e}=await import(`./chunk-CNIrt8cf.js`);return{createCssVariablesTheme:e}},[]);return i=await e({themes:[t({name:`css-variables`,variablePrefix:`--shiki-`,variableDefaults:{}})],langs:[`vue`,`bash`,`ts`,`js`,`python`,`cpp`]}),i}function o(e){if(!e)return``;let t=e.split(`
`);for(;t.length>0&&t[0].trim()===``;)t.shift();for(;t.length>0&&t[t.length-1].trim()===``;)t.pop();if(t.length===0)return``;let n=t.reduce((e,t)=>{if(t.trim()===``)return e;let n=t.match(/^\\s*/)?.[0].length??0;return Math.min(e,n)},1/0);return t.map(e=>e.slice(n===1/0?0:n)).join(`
`)}function l(e){return e.replace(/&/g,`&amp;`).replace(/</g,`&lt;`).replace(/>/g,`&gt;`).replace(/"/g,`&quot;`).replace(/'/g,`&#039;`)}let u=y(()=>r.value?r.value:`<pre class="shiki px-6 py-3"><code>${l(o(n.code))}</code></pre>`);async function d(){let e=o(n.code);if(!e){r.value=``;return}try{r.value=(await a()).codeToHtml(e,{lang:n.lang,theme:`css-variables`})}catch(t){console.error(`Shikiji highlighting failed:`,t),r.value=`<pre class="shiki px-6 py-3"><code>${l(e)}</code></pre>`}}return e(d),S(()=>{r.value||d()}),s(()=>n.code,d),(e,n)=>(c(),v(`div`,{class:m([`code-block text-sm overflow-auto`,{"has-line-numbers":t.lineNumbers,"is-bash":t.lang===`bash`}]),"data-theme":`dark`},[_(`div`,{class:`shiki-container`,innerHTML:u.value},null,8,z)],2))}}),[[`__scopeId`,`data-v-866f94f3`]]);export{j as a,M as i,R as n,N as r,B as t};